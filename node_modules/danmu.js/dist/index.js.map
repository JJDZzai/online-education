{"version":3,"sources":["webpack://danmu.js/webpack/universalModuleDefinition","webpack://danmu.js/webpack/bootstrap","webpack://danmu.js/./src/utils/util.js","webpack://danmu.js/./src/baseClass.js","webpack://danmu.js/./node_modules/es5-ext/object/is-value.js","webpack://danmu.js/./node_modules/type/value/is.js","webpack://danmu.js/./src/index.js","webpack://danmu.js/./src/danmu.js","webpack://danmu.js/./node_modules/event-emitter/index.js","webpack://danmu.js/./node_modules/d/index.js","webpack://danmu.js/./node_modules/type/plain-function/is.js","webpack://danmu.js/./node_modules/type/function/is.js","webpack://danmu.js/./node_modules/type/prototype/is.js","webpack://danmu.js/./node_modules/type/object/is.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/index.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/index.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/shim.js","webpack://danmu.js/./node_modules/es5-ext/function/noop.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-value.js","webpack://danmu.js/./node_modules/es5-ext/object/normalize-options.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/index.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-callable.js","webpack://danmu.js/./src/utils/logger.js","webpack://danmu.js/./src/control.js","webpack://danmu.js/./src/main.js","webpack://danmu.js/./src/channel.js","webpack://danmu.js/./src/bullet.js","webpack://danmu.js/./src/domrecycle.js","webpack://danmu.js/./src/resizeObserver.js","webpack://danmu.js/./src/style/index.scss?2278","webpack://danmu.js/./src/style/index.scss","webpack://danmu.js/./node_modules/css-loader/lib/css-base.js","webpack://danmu.js/./node_modules/style-loader/lib/addStyles.js","webpack://danmu.js/./node_modules/style-loader/lib/urls.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","util","el","tpl","attrs","cname","dom","document","createElement","className","innerHTML","keys","forEach","item","setAttribute","classList","Array","some","match","RegExp","replace","split","add","hasClass","remove","reg","removeClass","addClass","sel","querySelector","e","startsWith","getElementById","slice","dst","src","typeOf","Node","concat","deepCopy","obj","toString","nodeType","back","tagName","attributes","node","time","Math","floor","event","fn","offEvent","once","onDestroy","off","on","offInDestroy","_fn","data","elem","style","error","setProperty","BaseClass","this","logger","Log","_undefined","val","DanmuJs","options","setLogger","info","version","self","config","overlap","area","start","end","live","comments","direction","needResizeObserver","hideArr","domObj","RecyclableDomList","comment","duration","container","emit","containerStyle","player","bulletBtn","Control","isReady","addResizeObserver","addObserver","resize","main","pause","play","stop","clear","k","unObserver","destroy","txt","id","opacity","undefined","fontSize","like","prior","realTime","unshift","readData","dataHandle","push","oldID","newID","containerPos_","getBoundingClientRect","queue","pauseMove","status","startMove","setLikeDom","danmu","mouseControl","pos","filter","isClear","force","forceDuration","size","channelSize","setFontSize","top","channel_id","topInit","channel","indexOf","arr","color","index","splice","methods","descriptors","base","callable","apply","Function","defineProperties","descriptor","configurable","writable","type","listener","arguments","__eeOnceListener__","__ee__","listeners","candidate","length","args","isValue","isPlainFunction","assign","normalizeOpts","contains","dscr","w","desc","gs","set","isFunction","classRe","functionToString","test","isPrototype","isObject","constructor","possibleTypes","foo","bar","trzy","max","dest","TypeError","process","opts1","result","String","str","searchString","DEBUG","location","href","Logger","constructorName","message","optionalParams","console","log","Main","defaultOff","state","switchBtn","createDom","Channel","playedData","timer","retryTimer","retryStatus","interval","updateQueue","nums","clearTimeout","dataHandleTimer","rdata","bullet","hasAttached","bol","sort","a","b","setTimeout","resetWithCb","init","reset","channels","containerPos","resized","currentTime","formatTime","list","Bullet","detach","noDiscard","attach","addBullet","removeBullet","containerWidth","width","containerHeight","height","containerLeft","left","containerRight","right","resizing","resizeTimer","isFullscreen","bookChannelId","navigator","userAgent","scroll","bottom","operating","bookId","channelWidth","channelHeight","num","occupy","ceil","flag","j","curBullet","curBulletPos","newT","curV","curT","newS","newV","bOffset","deleteIndex","deleteItem","nextAddTime","channelId","loop","isInit","channelReset","resetTimer","cb","moveV","onChangeDirection","use","copyDOM","copyDom","eventListeners","eventListener","addEventListener","useCapture","appendChild","textContent","random","elPos","mouseoverFunWrapper","mouseoverFun","mouseEnterControl","mouseEnterFunWrapper","mouseControlPause","removeEventListener","parentNode","removeChild","unuse","removeTimer","pastDuration","Date","getTime","moveTime","pastS","nowS","moveMoreS","moveContainerHeight","moveContainerWidth","startTime","hasMove","leftDuration","startMoveTimer","func","bulletPos","v","children","outerHTML","RecyclableDOMList","initDOM","initSize","idleList","usingList","_id","_expand","firseIdle","shift","idx","textcontent","clearElementStyle","element","ua","resizeObserver","__handlers","ResizeObserver","observer","entries","timeStampe","__trigger","err","target","handler","observe","map","unobserve","disconnect","__runHandler","destroyObserver","content","transform","locals","useSourceMap","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","getTarget","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","before","removeStyleElement","createStyleElement","addAttrs","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","applyToTag","newObj","newList","mayRemove","textStore","replaceText","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"danmu.js\"] = factory();\n\telse\n\t\troot[\"danmu.js\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","let util = {}\n\nutil.createDom = function (el = 'div', tpl = '', attrs = {}, cname = '') {\n  let dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach(item => {\n    let key = item\n    let value = attrs[item]\n    if (el === 'video' || el === 'audio') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\nutil.hasClass = function (el, className) {\n  if (el.classList) {\n    return Array.prototype.some.call(el.classList, item => item === className)\n  } else {\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\nutil.addClass = function (el, className) {\n  if (el.classList) {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.add(item)\n    })\n  } else if (!util.hasClass(el, className)) {\n    el.className += ' ' + className\n  }\n}\n\nutil.removeClass = function (el, className) {\n  if (el.classList) {\n    className.split(/\\s+/g).forEach(item => {\n      el.classList.remove(item)\n    })\n  } else if (util.hasClass(el, className)) {\n    className.split(/\\s+/g).forEach(item => {\n      let reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n      el.className = el.className.replace(reg, ' ')\n    })\n  }\n}\n\nutil.toggleClass = function (el, className) {\n  className.split(/\\s+/g).forEach(item => {\n    if (util.hasClass(el, item)) {\n      util.removeClass(el, item)\n    } else {\n      util.addClass(el, item)\n    }\n  })\n}\n\nutil.findDom = function (el = document, sel) {\n  let dom\n  // fix querySelector IDs that start with a digit\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\n  try {\n    dom = el.querySelector(sel)\n  } catch (e) {\n    if (sel.startsWith('#')) {\n      dom = el.getElementById(sel.slice(1))\n    }\n  }\n  return dom\n}\n\nutil.deepCopy = function (dst, src) {\n  if (util.typeOf(src) === 'Object' && util.typeOf(dst) === 'Object') {\n    Object.keys(src).forEach(key => {\n      if (util.typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\n        if (!dst[key]) {\n          dst[key] = src[key]\n        } else {\n          util.deepCopy(dst[key], src[key])\n        }\n      } else if (util.typeOf(src[key]) === 'Array') {\n        dst[key] = util.typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\n      } else {\n        dst[key] = src[key]\n      }\n    })\n    return dst\n  }\n}\n\nutil.typeOf = function (obj) {\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\nutil.copyDom = function (dom) {\n  if (dom && dom.nodeType === 1) {\n    let back = document.createElement(dom.tagName)\n    Array.prototype.forEach.call(dom.attributes, (node) => {\n      back.setAttribute(node.name, node.value)\n    })\n    if (dom.innerHTML) {\n      back.innerHTML = dom.innerHTML\n    }\n    return back\n  } else {\n    return ''\n  }\n}\n\nutil.formatTime = function (time) {\n  let s = Math.floor(time)\n  let ms = time - s\n  return s * 1000 + ms\n}\n\nutil.offInDestroy = (object, event, fn, offEvent) => {\n  function onDestroy () {\n    object.off(event, fn)\n    object.off(offEvent, onDestroy)\n  }\n  object.once(offEvent, onDestroy)\n}\n\nutil.on = (object, event, fn, offEvent) => {\n  if (offEvent) {\n    object.on(event, fn)\n    util.offInDestroy(object, event, fn, offEvent)\n  } else {\n    let _fn = data => {\n      fn(data)\n      object.off(event, _fn)\n    }\n    object.on(event, _fn)\n  }\n}\n\nutil.style = (elem, name, value)=>{\n  let style = elem.style;\n  try {\n    style[name] = value;\n  } catch (error) {\n    style.setProperty( name, value );\n  }\n}\n\nexport default util\n","import Log from './utils/logger'\n\nclass BaseClass {\n  constructor () {\n  }\n  setLogger (name = '') {\n    this.logger = new Log(name + '.js')\n  }\n}\n\nexport default BaseClass\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","import DanmuJs from './danmu'\nimport './style/index.scss'\nexport default DanmuJs\n","import EventEmitter from 'event-emitter'\nimport BaseClass from './baseClass'\nimport Control from './control'\nimport RecyclableDomList from './domrecycle.js'\nimport util from './utils/util'\nimport { version } from '../version.json'\nimport {addObserver, unObserver} from './resizeObserver'\n\nclass DanmuJs extends BaseClass {\n  constructor (options) {\n    super()\n    this.setLogger('danmu')\n    this.logger && this.logger.info(`danmu.js version: ${version}`)\n    let self = this\n    self.config = util.deepCopy({\n      overlap: false,\n      area: {\n        start: 0,\n        end: 1\n      },\n      live: false,\n      comments: [],\n      direction: 'r2l',\n      needResizeObserver: false\n    }, options)\n    self.hideArr = []\n    self.domObj = new RecyclableDomList()\n    EventEmitter(self)\n    self.config.comments.forEach(comment => {\n      comment.duration = comment.duration ? comment.duration : 5000\n      if(!comment.mode) {\n        comment.mode = 'scroll'\n      }\n    })\n    if(self.config.container && self.config.container.nodeType === 1) {\n      self.container = self.config.container\n    } else {\n      self.emit('error', 'container id can\\'t be empty')\n      return false\n    }\n    if(self.config.containerStyle) {\n      let style = self.config.containerStyle\n      Object.keys(style).forEach(function (key) {\n        self.container.style[key] = style[key]\n      })\n    }\n    self.live = self.config.live\n    self.player = self.config.player\n    self.direction = self.config.direction\n    util.addClass(self.container, 'danmu')\n    self.bulletBtn = new Control(self)\n    self.isReady = true\n    self.emit('ready')\n    this.logger && this.logger.info('ready')\n    this.addResizeObserver()\n  }\n\n  addResizeObserver () {\n    this.config.needResizeObserver && addObserver(this.container, () => {\n      this.logger && this.logger.info('needResizeObserver')\n      this.resize()\n    })\n  }\n  \n  start () {\n    this.logger && this.logger.info('start')\n    this.bulletBtn.main.start()\n  }\n\n  pause () {\n    this.logger && this.logger.info('pause')\n    this.bulletBtn.main.pause()\n  }\n\n  play () {\n    this.logger && this.logger.info('play')\n    this.bulletBtn.main.play()\n  }\n\n  stop () {\n    this.logger && this.logger.info('stop')\n    this.bulletBtn.main.stop()\n  }\n\n  clear () {\n    this.logger && this.logger.info('clear')\n    this.bulletBtn.main.clear()\n  }\n\n  destroy () {\n    unObserver(this.container)\n    this.logger && this.logger.info('destroy')\n    this.stop()\n    this.bulletBtn.destroy()\n    this.domObj.destroy()\n    for (let k in this) {\n      delete this[k]\n    }\n    this.emit('destroy')\n  }\n\n  sendComment (comment) {\n    this.logger && this.logger.info(`sendComment: ${comment.txt || '[DOM Element]'}`)\n    if(!comment.duration) {\n      comment.duration = 15000\n    }\n    if (comment && comment.id && comment.duration && (comment.el || comment.txt)) {\n      comment.duration = comment.duration ? comment.duration : 5000\n      // console.log(comment.style)\n      if (!comment.style) {\n        comment.style = {\n          opacity: undefined,\n          fontSize: undefined\n        }\n      }\n      if (comment.style) {\n        if (this.opacity && this.opacity !== comment.style.opacity) {\n          comment.style.opacity = this.opacity\n        }\n        if (this.fontSize && this.fontSize !== comment.style.fontSize) {\n          comment.style.fontSize = this.fontSize\n        }\n        if (this.like) {\n          comment.like = comment.like ? comment.like : this.like\n        }\n      }\n      if(comment.prior || comment.realTime) {\n        this.bulletBtn.main.data.unshift(comment)\n        if (comment.realTime) {\n          this.bulletBtn.main.readData()\n          this.bulletBtn.main.dataHandle()\n        }\n      } else {\n        this.bulletBtn.main.data.push(comment)\n      }\n    }\n  }\n\n  setCommentID (oldID, newID) {\n    this.logger && this.logger.info(`setCommentID: oldID ${oldID} newID ${newID}`)\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (oldID && newID) {\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === oldID) {\n          data.id = newID\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === oldID) {\n          item.id = newID\n          item.pauseMove(containerPos_)\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setCommentDuration (id, duration) {\n    this.logger && this.logger.info(`setCommentDuration: id ${id} duration ${duration}`)\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (id && duration) {\n      duration = duration ? duration : 5000\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === id) {\n          data.duration = duration\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setCommentLike (id, like) {\n    this.logger && this.logger.info(`setCommentLike: id ${id} like ${like}`)\n    let containerPos_ = this.container.getBoundingClientRect()\n    this.like = like\n    if (id && like) {\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === id) {\n          data.like = like\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          item.pauseMove(containerPos_)\n          item.setLikeDom(like.el, like.style)\n          if (item.danmu.bulletBtn.main.status !== 'paused') {\n            item.startMove(containerPos_)\n          }\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  restartComment (id) {\n    this.logger && this.logger.info(`restartComment: id ${id}`)\n    this.mouseControl = false\n    let pos = this.container.getBoundingClientRect()\n    if (id) {\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          if (item.danmu.bulletBtn.main.status !== 'paused') {\n            item.startMove(pos, true)\n          }\n          else {\n            item.status = 'paused'\n          }\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  freezeComment (id) {\n    this.logger && this.logger.info(`freezeComment: id ${id}`)\n    this.mouseControl = true\n    let pos = this.container.getBoundingClientRect()\n    if (id) {\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          item.status = 'forcedPause'\n          item.pauseMove(pos)\n          if (item.el && item.el.style) {\n            util.style(item.el, 'zIndex', 10)\n          }\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  removeComment (id) {\n    this.logger && this.logger.info(`removeComment: id ${id}`)\n    if (!id) return\n    this.bulletBtn.main.queue.some(item => {\n      if(item.id === id) {\n        item.remove()\n        return true\n      } else {\n        return false\n      }\n    })\n    this.bulletBtn.main.data = this.bulletBtn.main.data.filter(item => {\n      return item.id !== id\n    })\n  }\n\n  updateComments (comments, isClear = true) {\n    if(isClear) {\n      this.bulletBtn.main.data = []\n    }\n    this.bulletBtn.main.data = this.bulletBtn.main.data.concat(comments)\n  }\n\n  setAllDuration (mode = 'scroll', duration, force = true) {\n    this.logger && this.logger.info(`setAllDuration: mode ${mode} duration ${duration} force ${force}`)\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (duration) {\n      duration = duration ? duration : 5000\n      if (force) {\n        this.bulletBtn.main.forceDuration = duration\n      }\n      this.bulletBtn.main.data.forEach(data => {\n        if(mode === data.mode) {\n          data.duration = duration\n        }\n      })\n      this.bulletBtn.main.queue.forEach(item => {\n        if(mode === item.mode) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          if (item.danmu.bulletBtn.main.status !== 'paused') {\n            item.startMove(containerPos_)\n          }\n        }\n      })\n    }\n  }\n\n  setOpacity (opacity) {\n    this.logger && this.logger.info(`setOpacity: opacity ${opacity}`)\n    this.container.style.opacity = opacity\n  }\n  \n  setFontSize (size, channelSize) {\n    this.logger && this.logger.info(`setFontSize: size ${size} channelSize ${channelSize}`)\n    this.fontSize = `${size}px`\n    if (size) {\n      this.bulletBtn.main.data.forEach(data => {\n        if (data.style) {\n          data.style.fontSize = this.fontSize\n        }\n      })\n      this.bulletBtn.main.queue.forEach(item => {\n        if (!item.options.style) {\n          item.options.style = {}\n        }\n        \n        item.options.style.fontSize = this.fontSize\n        item.setFontSize(this.fontSize)\n        if (channelSize) {\n          item.top = item.channel_id[0] * channelSize\n          item.topInit()\n        }\n      })\n    }\n    if (channelSize) {\n      this.config.channelSize = channelSize\n      this.bulletBtn.main.channel.resize(true)\n    }\n  }\n  \n  setArea (area) {\n    this.logger && this.logger.info(`setArea: area ${area}`)\n    this.config.area = area\n    this.bulletBtn.main.channel.resize(true)\n  }\n\n  hide (mode = 'scroll') {\n    this.logger && this.logger.info(`hide: mode ${mode}`)\n    if(this.hideArr.indexOf(mode) < 0) {\n      this.hideArr.push(mode)\n    }\n    let arr = this.bulletBtn.main.queue.filter(item => mode === item.mode || (mode === 'color' && item.color))\n    arr.forEach(item => item.remove())\n  }\n\n  show (mode = 'scroll') {\n    this.logger && this.logger.info(`show: mode ${mode}`)\n    let index = this.hideArr.indexOf(mode)\n    if(index > -1) {\n      this.hideArr.splice(index, 1)\n    }\n  }\n\n  setDirection (direction = 'r2l') {\n    this.logger && this.logger.info(`setDirection: direction ${direction}`)\n    this.emit('changeDirection', direction)\n  }\n\n  resize () {\n    this.logger && this.logger.info('resize')\n    this.emit('channel_resize')\n  }\n}\n\nexport default DanmuJs\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","const DEBUG = typeof (window) !== 'undefined' && window.location.href.indexOf('danmu-debug') > -1\n\nclass Logger {\n    constructor (constructorName) {\n      this.constructorName = constructorName || ''\n    }\n    info (message, ...optionalParams) {\n        DEBUG && console.log(`[Danmu Log][${this.constructorName}]`, message, ...optionalParams)\n    }\n}\n\nexport default Logger","import BaseClass from './baseClass'\nimport util from './utils/util'\nimport Main from './main'\n\nclass Control extends BaseClass {\n  constructor (danmu) {\n    super()\n    this.setLogger('control')\n    this.danmu = danmu\n    this.main = new Main(danmu)\n    if(!danmu.config.defaultOff) {\n      this.main.start()\n    }\n  }\n\n  createSwitch (state = true) {\n    this.logger && this.logger.info('createSwitch')\n    this.switchBtn = util.createDom('dk-switch', '<span class=\"txt\">弹</span>', {}, `danmu-switch ${state ? 'danmu-switch-active' : ''}`)\n    return this.switchBtn\n  }\n\n  destroy () {\n    this.logger && this.logger.info('destroy')\n    this.main.destroy()\n    for (let k in this) {\n      delete this[k]\n    }\n  }\n}\n\nexport default Control\n","import BaseClass from './baseClass'\nimport Channel from './channel'\nimport Bullet from './bullet'\nimport util from './utils/util'\n\n/**\n * [Main 弹幕主进程]\n * @type {Class}\n */\nclass Main extends BaseClass {\n  constructor (danmu) {\n    super()\n    this.setLogger('main')\n    this.danmu = danmu\n    this.container = danmu.container\n    this.channel = new Channel(danmu)// 弹幕轨道实例\n    this.data = [].concat(danmu.config.comments)\n    this.playedData = []\n    this.queue = []// 等待播放的弹幕队列\n    this.timer = null// 弹幕动画定时器句柄\n    this.retryTimer = null// 弹幕更新重试定时器句柄\n    this.retryStatus = 'normal'\n    this.interval = danmu.config.interval || 2000// 弹幕队列缓存间隔\n    this.status = 'idle'// 当前弹幕正在闲置\n    util.on(danmu, 'bullet_remove', this.updateQueue.bind(this), 'destroy')\n    let self = this\n    util.on(this.danmu, 'changeDirection', direction => {\n      self.danmu.direction = direction\n    }, 'destroy')\n    this.nums = 0\n  }\n  destroy () {\n    this.logger && this.logger.info('destroy')\n    clearTimeout(this.dataHandleTimer)\n    this.channel.destroy()\n    this.data = []\n    for (let k in this) {\n      delete this[k]\n    }\n  }\n  // 在渲染队列中移除已经展示完的弹幕对象\n  updateQueue (rdata) {\n    this.logger && this.logger.info('updateQueue')\n    let self = this\n    self.queue.some((item, index) => {\n      if (item.id === rdata.bullet.id) {\n        self.queue.splice(index, 1)\n        return true\n      } else {\n        return false\n      }\n    })\n    self.data.some((item, index) => {\n      if (item.id === rdata.bullet.id) {\n        item.hasAttached = false\n        return true\n      } else {\n        return false\n      }\n    })\n  }\n  init (bol, self) {\n    self.logger && self.logger.info('init')\n    if (!self) {\n      self = this\n    }\n    self.retryStatus = 'normal'\n    self.data.sort((a, b) => a.start - b.start)\n    let dataHandle = function () {\n      if (self.status === 'closed' && self.retryStatus === 'stop') {\n        return\n      }\n      if (self.status === 'playing') {\n        self.readData()\n        self.dataHandle()\n      }\n      if (self.retryStatus !== 'stop' || self.status === 'paused') {\n        self.dataHandleTimer = setTimeout(function () {\n          dataHandle()\n        }, self.interval - 1000)\n      }\n    }\n    if (!self.retryTimer) {\n      dataHandle()\n    }\n  }\n  // 启动弹幕渲染主进程\n  start () {\n    this.logger && this.logger.info('start')\n    let self = this\n    this.status = 'playing'\n    this.queue = []\n    this.container.innerHTML = ''\n    this.channel.resetWithCb(self.init, self)\n  }\n  stop () {\n    this.logger && this.logger.info('stop')\n    let self = this\n    this.status = 'closed'\n    self.retryTimer = null\n    self.retryStatus = 'stop'\n    self.channel.reset()\n    this.queue = []\n    self.container.innerHTML = ''\n  }\n  clear () {\n    this.logger && this.logger.info('clear')\n    this.channel.reset()\n    this.data = []\n    this.queue = []\n    this.container.innerHTML = ''\n  }\n  play () {\n    this.logger && this.logger.info('play')\n    this.status = 'playing'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        // for (let i = 0; i < channels.length; i++) {\n        //   channels[i].queue[key].forEach(item => {\n        //     if(!item.resized) {\n        //       item.startMove(containerPos)\n        //       item.resized = true\n        //     }\n        //   })\n        // }\n        this.queue.forEach(item => {\n          item.startMove(containerPos)\n          item.resized = true\n        })\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.resized = false\n          })\n        }\n      })\n    }\n  }\n  pause () {\n    this.logger && this.logger.info('pause')\n    this.status = 'paused'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      // ['scroll', 'top', 'bottom'].forEach( key => {\n      //   for (let i = 0; i < channels.length; i++) {\n      //     channels[i].queue[key].forEach(item => {\n      //       item.pauseMove(containerPos)\n      //     })\n      //   }\n      // })\n      this.queue.forEach(item => {\n        item.pauseMove(containerPos)\n      })\n    }\n  }\n  dataHandle () {\n    let self = this\n    if (this.status === 'paused' || this.status === 'closed') {\n      return\n    }\n    if (self.queue.length) {\n      self.queue.forEach(item => {\n        if (item.status === 'waiting') {\n          // item.status = 'start'\n          item.startMove(self.channel.containerPos)\n        }\n      })\n    }\n  }\n  readData () {\n    let self = this, danmu = this.danmu\n    if(!danmu.isReady) return\n    let currentTime = 0\n    if(danmu.player && danmu.player.currentTime) {\n      currentTime = util.formatTime(danmu.player.currentTime)\n    }\n    let bullet, interval = self.interval, channel = self.channel, result\n    let list\n    if(danmu.player) {\n      list = self.data.filter(item => {\n        if (!item.start && self.danmu.hideArr.indexOf(item.mode) < 0) {\n          if (!item.color || self.danmu.hideArr.indexOf('color') < 0) {\n            item.start = currentTime\n          }\n        }\n        return self.danmu.hideArr.indexOf(item.mode) < 0 && (!item.color || self.danmu.hideArr.indexOf('color') < 0) && item.start - interval <= currentTime && currentTime <= item.start + interval\n      })\n      if(danmu.live) {\n        self.data = []\n      }\n    } else {\n      list = self.data.splice(0, 1)\n      // self.data = []\n      if(list.length === 0) list = self.playedData.splice(0, 1)\n    }\n\n    if (list.length > 0) {\n      list.forEach(item => {\n        if (self.forceDuration && self.forceDuration != item.duration) {\n          item.duration = self.forceDuration\n        }\n        bullet = new Bullet(danmu, item)\n        if (!item.hasAttached) {\n          bullet.attach()\n          item.hasAttached = true\n          result = channel.addBullet(bullet)\n          if (result.result) {\n            self.queue.push(bullet)\n            self.nums++\n            bullet.topInit()\n          } else {\n            bullet.detach()\n            for (let k in bullet) {\n              delete bullet[k]\n            }\n            bullet = null\n            item.hasAttached = false\n            if(item.noDiscard) {\n              if(item.prior) {\n                self.data.unshift(item)\n              } else {\n                self.data.push(item)\n              }\n            }\n          }\n        } else {\n          bullet.detach()\n          for (let k in bullet) {\n            delete bullet[k]\n          }\n          bullet = null\n          item.hasAttached = false\n          if(item.noDiscard) {\n            if(item.prior) {\n              self.data.unshift(item)\n            } else {\n              self.data.push(item)\n            }\n          }\n        }\n      })\n    }\n  }\n}\n\nexport default Main\n","import BaseClass from './baseClass'\nimport util from './utils/util'\n\n/**\n * [Channel 弹幕轨道控制]\n * @type {Class}\n */\nclass Channel extends BaseClass {\n  constructor (danmu) {\n    super()\n    this.setLogger('channel')\n    this.danmu = danmu\n    this.reset(true)\n    let self = this\n    util.on(this.danmu, 'bullet_remove', r => {\n      self.removeBullet(r.bullet)\n    }, 'destroy')\n    this.direction = danmu.direction\n    util.on(this.danmu, 'changeDirection', direction => {\n      self.direction = direction\n    }, 'destroy')\n\n    this.containerPos = this.danmu.container.getBoundingClientRect()\n    this.containerWidth = this.containerPos.width\n    this.containerHeight = this.containerPos.height\n    this.containerLeft = this.containerPos.left\n    this.containerRight = this.containerPos.right\n    util.on(this.danmu, 'channel_resize', () => {\n      self.containerPos = self.danmu.container.getBoundingClientRect()\n      if (self.resizing) {\n        return\n      }\n      self.containerWidth = self.containerPos.width\n      self.containerHeight = self.containerPos.height\n      self.containerLeft = self.containerPos.left\n      self.containerRight = self.containerPos.right\n      self.resize(true)\n    }, 'destroy')\n  }\n  destroy () {\n    this.logger && this.logger.info('destroy')\n    clearTimeout(this.resizeTimer)\n    // clearTimeout(this.resetTimer)\n    this.channels = []\n    for (let k in this) {\n      delete this[k]\n    }\n  }\n  resize (isFullscreen = false) {\n    this.logger && this.logger.info('resize')\n    let container = this.danmu.container\n    let self = this\n    if (self.resizing) {\n      return\n    }\n    self.resizing = true\n    this.resizeTimer = setTimeout(function () {\n      if (self.danmu.bulletBtn.main.data) {\n        self.danmu.bulletBtn.main.data.forEach(item => {\n          if (item.bookChannelId) {\n            delete item['bookChannelId']\n            self.logger && self.logger.info('resize导致' + item.id + '号优先弹幕预定取消')\n          }\n        })\n      }\n      self.logger && self.logger.info('resize导致所有轨道恢复正常使用')\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n  \n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        if(self.direction === 'b2t') {\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n        } else {\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n        }\n      }\n      self.container = container\n      let fontSize = self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\n      let channelSize\n      if(self.direction === 'b2t') {\n        channelSize = Math.floor(self.width / fontSize)\n      } else {\n        channelSize = Math.floor(self.height / fontSize)\n      }\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      if (self.channels && self.channels.length <= channels.length) {\n        for (let i = 0; i < self.channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, isFullscreen)\n                  if (item.danmu.bulletBtn.main.status !== 'paused') {\n                    item.startMove(self.containerPos)\n                  }\n                  item.resized = true\n                }\n              }\n            })\n          })\n          self.channels[i].queue['bottom'].forEach(item => {\n            if (item.el) {\n              channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n              if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n                let channel_id = [].concat(item.channel_id)\n                item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                item.top = item.channel_id[0] * fontSize\n                if (self.danmu.config.area && self.danmu.config.area.start) {\n                  item.top += self.containerHeight * self.danmu.config.area.start\n                }\n                item.topInit()\n              }\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, isFullscreen)\n                if (item.danmu.bulletBtn.main.status !== 'paused') {\n                  item.startMove(self.containerPos)\n                }\n                item.resized = true\n              }\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized 重置:' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        if(self.direction === 'b2t') {\n          self.channelWidth = fontSize\n        } else {\n          self.channelHeight = fontSize\n        }\n      } else if (self.channels && self.channels.length > channels.length) {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            if (key === 'top' && i > Math.floor(channels.length / 2)) {\n              //\n            } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n               // \n            } else {\n              let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n              self.channels[num].queue[key].forEach((item, index) => {\n                if (item.el) {\n                  channels[i].queue[key].push(item)\n                  if(key === 'bottom') {\n                    if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                      let channel_id = [].concat(item.channel_id)\n                      item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                      item.top = item.channel_id[0] * fontSize\n                      if (self.danmu.config.area && self.danmu.config.area.start) {\n                        item.top += self.containerHeight * self.danmu.config.area.start\n                      }\n                      item.topInit()\n                    }\n                  }\n                  item.pauseMove(self.containerPos, isFullscreen)\n                  if (item.danmu.bulletBtn.main.status !== 'paused') {\n                    item.startMove(self.containerPos)\n                  }\n                  if(!item.resized) {\n                    item.resized = true\n                  }\n                }\n                self.channels[num].queue[key].splice(index, 1)\n              })\n            }\n          })\n        }\n        // for (let i = channels.length; i < self.channels.length; i++) {\n        //   ['scroll', 'top', 'bottom'].forEach(key => {\n        //     self.channels[i].queue[key].forEach(item => {\n        //       item.pauseMove(self.containerPos)\n        //       item.remove()\n        //     })\n        //   })\n        // }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized 重置:' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        if(self.direction === 'b2t') {\n          self.channelWidth = fontSize\n        } else {\n          self.channelHeight = fontSize\n        }\n      }\n      self.resizing = false\n    }, 10)\n  }\n  addBullet (bullet) {\n    // this.logger && this.logger.info(`addBullet ${bullet.options.txt || '[DOM Element]'}`)\n    let self = this\n    let danmu = this.danmu\n    let channels = this.channels\n    let channelHeight, channelWidth, occupy\n    \n    if(self.direction === 'b2t') {\n      channelWidth = this.channelWidth\n      occupy = Math.ceil(bullet.width / channelWidth)\n    } else {\n      channelHeight = this.channelHeight\n      occupy = Math.ceil(bullet.height / channelHeight)\n    }\n    if (occupy > channels.length) {\n      return {\n        result: false,\n        message: `exceed channels.length, occupy=${occupy},channelsSize=${channels.length}`\n      }\n    } else {\n      let flag = true, channel, pos = -1\n      for (let i = 0, max = channels.length; i < max; i++) {\n        if (channels[i].queue[bullet.mode].some(item => item.id === bullet.id)) {\n          return {\n            result: false,\n            message: `exsited, channelOrder=${i},danmu_id=${bullet.id}`\n          }\n        }\n      }\n      if(bullet.mode === 'scroll') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            channel = channels[j]\n            if (channel.operating.scroll) {\n              flag = false\n              break\n            }\n            if (channel.bookId.scroll && (channel.bookId.scroll !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating.scroll = true\n            let curBullet = channel.queue.scroll[0]\n            if (curBullet) {\n              let curBulletPos = curBullet.el.getBoundingClientRect()\n              if(self.direction === 'b2t') {\n                if (curBulletPos.bottom > self.containerPos.bottom) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              } else {\n                if (curBulletPos.right > self.containerPos.right) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              }\n\n              // Vcur * t + Scur已走 - Widthcur = Vnew * t\n              // t = (Scur已走 - Widthcur) / (Vnew - Vcur)\n              // Vnew * t < Widthplayer\n              let curS, curV, curT, newS, newV, newT\n              if(self.direction === 'b2t') {\n                curS = curBulletPos.top - self.containerPos.top + curBulletPos.height\n\n                curV = (self.containerPos.height + curBulletPos.height) / curBullet.duration\n                curT = curS / curV\n\n                newS = self.containerPos.height\n                newV = (self.containerPos.height + bullet.height) / bullet.duration\n              } else {\n                curS = curBulletPos.left - self.containerPos.left + curBulletPos.width\n\n                curV = (self.containerPos.width + curBulletPos.width) / curBullet.duration\n                curT = curS / curV\n\n                newS = self.containerPos.width\n                newV = (self.containerPos.width + bullet.width) / bullet.duration\n              }\n              newT = newS / newV\n              if (!danmu.config.bOffset) {\n                danmu.config.bOffset = 0\n              }\n              if (curV < newV && curT + danmu.config.bOffset > newT) {\n                flag = false\n                channel.operating.scroll = false\n                break\n              }\n            }\n            channel.operating.scroll = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'top') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j > Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'bottom') {\n        for (let i = channels.length - occupy; i >= 0; i--) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j <= Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      }\n\n      if (pos !== -1) {\n        for (let i = pos, max = pos + occupy; i < max; i++) {\n          channel = channels[i]\n          channel.operating[bullet.mode] = true\n          channel.queue[bullet.mode].unshift(bullet)\n          if (bullet.prior) {\n            delete channel.bookId[bullet.mode]\n            self.logger && self.logger.info(i + '号轨道恢复正常使用')\n          }\n          channel.operating[bullet.mode] = false\n        }\n        if (bullet.prior) {\n          self.logger && self.logger.info(bullet.id + '号优先弹幕运行完毕')\n          delete bullet['bookChannelId']\n          if(danmu.player) {\n            let dataList = danmu.bulletBtn.main.data\n            dataList.some(function (item) {\n              if (item.id === bullet.id) {\n                delete item['bookChannelId']\n                return true\n              } else {\n                return false\n              }\n            })\n          }\n        }\n        bullet.channel_id = [pos, occupy]\n\n        if(self.direction === 'b2t') {\n          bullet.top = pos * channelWidth\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerWidth * self.danmu.config.area.start\n          }\n        } else {\n          bullet.top = pos * channelHeight\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerHeight * self.danmu.config.area.start\n          }\n        }\n        return {\n          result: bullet,\n          message: 'success'\n        }\n      } else {\n        if (bullet.options.realTime) {\n          // 找到应该被删的 danmu\n          let start = 0\n          let deleteIndex = -1\n          let deleteItem = null\n          self.danmu.bulletBtn.main.queue.forEach((item, index) => {\n            if (!item.prior && !item.options.realTime && item.el && item.el.getBoundingClientRect().left > self.containerPos.right && item.start >= start) {\n              start = item.start\n              deleteIndex = index\n              deleteItem = item\n            }\n          })  \n          if (deleteItem) {\n            deleteItem.remove()\n            self.removeBullet(deleteItem)\n            self.danmu.bulletBtn.main.queue.splice(deleteIndex, 1)\n            bullet.channel_id = deleteItem.channel_id\n            for (let i = deleteItem.channel_id[0], max = deleteItem.channel_id[0] + deleteItem.channel_id[1]; i < max; i++) {\n              channel = channels[i]\n              channel.operating[bullet.mode] = true\n              channel.queue[bullet.mode].unshift(bullet)\n              if (bullet.prior) {\n                delete channel.bookId[bullet.mode]\n              }\n              channel.operating[bullet.mode] = false\n            }\n            bullet.top = deleteItem.top\n            if (self.danmu.config.area && self.danmu.config.area.start) {\n              bullet.top += self.containerHeight * self.danmu.config.area.start\n            }\n            return {\n              result: bullet,\n              message: 'success'\n            }\n          }\n        }\n\n        if (bullet.prior) {\n          if (!bullet.bookChannelId && !self.danmu.live) {\n            pos = -1\n            for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n              flag = true\n              for (let j = i; j < i + occupy; j++) {\n                if (channels[j].bookId[bullet.mode]) {\n                  flag = false\n                  break\n                }\n              }\n              if (flag) {\n                pos = i\n                break\n              }\n            }\n            if (pos !== -1) {\n              for (let j = pos; j < pos + occupy; j++) {\n                channels[j].bookId[bullet.mode] = bullet.id\n                self.logger && self.logger.info(j + '号轨道被' + bullet.id + '号优先弹幕预定')\n              }\n              let nextAddTime = 2\n              if(danmu.player) {\n                let dataList = danmu.bulletBtn.main.data\n                dataList.some(function (item) {\n                  if (item.id === bullet.id) {\n                    self.logger && self.logger.info(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                    item.start += nextAddTime * 1000\n                    item.bookChannelId = [pos, occupy]\n                    self.logger && self.logger.info(`${bullet.id}号优先弹幕预定了${pos}~${pos + occupy - 1}号轨道`)\n                    return true\n                  } else {\n                    return false\n                  }\n                })\n              }\n            }\n          } else {\n            let nextAddTime = 2\n            if(danmu.player) {\n              let dataList = danmu.bulletBtn.main.data\n              dataList.some(function (item) {\n                if (item.id === bullet.id) {\n                  self.logger && self.logger.info(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                  item.start += nextAddTime * 1000\n                  return true\n                } else {\n                  return false\n                }\n              })\n            }\n          }\n        } \n        \n        return {\n          result: false,\n          message: 'no surplus will right'\n        }\n      }\n    }\n  }\n  removeBullet (bullet) {\n    this.logger && this.logger.info(`removeBullet ${bullet.options.txt || '[DOM Element]'}`)\n    // console.log('removeBullet')\n    let channels = this.channels\n    let channelId = bullet.channel_id\n    let channel\n    for (let i = channelId[0], max = channelId[0] + channelId[1]; i < max; i++) {\n      channel = channels[i]\n      if (channel) {\n        channel.operating[bullet.mode] = true\n        let i = -1\n        channel.queue[bullet.mode].some((item, index) => {\n          if (item.id === bullet.id) {\n            i = index\n            return true\n          } else {\n            return false\n          }\n        })\n        if (i > -1) {\n          channel.queue[bullet.mode].splice(i, 1)\n        }\n        channel.operating[bullet.mode] = false\n      }\n    }\n    if(bullet.options.loop) {\n      this.danmu.bulletBtn.main.playedData.push(bullet.options)\n    }\n  }\n  resetArea () {\n    this.logger && this.logger.info('resetArea')\n    // console.log('resetArea')\n    let container = this.danmu.container\n    let self = this\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      if(self.direction === 'b2t') {\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n      } else {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n    }\n    self.container = container\n    let fontSize =self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\n    let channelSize\n    if(self.direction === 'b2t') {\n      channelSize = Math.floor(self.width / fontSize)\n    } else {\n      channelSize = Math.floor(self.height / fontSize)\n    }\n\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n\n    if (self.channels && self.channels.length <= channels.length) {\n      for (let i = 0; i < self.channels.length; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        };\n        ['scroll', 'top'].forEach(key => {\n          self.channels[i].queue[key].forEach(item => {\n            if (item.el) {\n              channels[i].queue[key].push(item)\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, false)\n                item.startMove(self.containerPos)\n                item.resized = true\n              }\n            }\n          })\n        })\n        self.channels[i].queue['bottom'].forEach(item => {\n          if (item.el) {\n            channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n            if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n              let channel_id = [].concat(item.channel_id)\n              item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n              item.top = item.channel_id[0] * fontSize\n              if (self.danmu.config.area && self.danmu.config.area.start) {\n                item.top += self.containerHeight * self.danmu.config.area.start\n              }\n              item.topInit()\n            }\n            if(!item.resized) {\n              item.pauseMove(self.containerPos, false)\n              item.startMove(self.containerPos)\n              item.resized = true\n            }\n          }\n        })\n      }\n      for (let i = 0; i < channels.length; i++) {\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          channels[i].queue[key].forEach(item => {\n            // console.log('resized 重置:' + item)\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    } else if (self.channels && self.channels.length > channels.length) {\n      for (let i = 0; i < channels.length; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        };\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          if (key === 'top' && i > Math.floor(channels.length / 2)) {\n            //\n          } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n            //\n          } else {\n            let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n            self.channels[num].queue[key].forEach((item, index) => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(key === 'bottom') {\n                  if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                    let channel_id = [].concat(item.channel_id)\n                    item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                    item.top = item.channel_id[0] * fontSize\n                    if (self.danmu.config.area && self.danmu.config.area.start) {\n                      item.top += self.containerHeight * self.danmu.config.area.start\n                    }\n                    item.topInit()\n                  }\n                }\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, false)\n                  item.startMove(self.containerPos)\n                  item.resized = true\n                }\n              }\n              self.channels[num].queue[key].splice(index, 1)\n            })\n          }\n        })\n      }\n      // for (let i = channels.length; i < self.channels.length; i++) {\n      //   ['scroll', 'top', 'bottom'].forEach(key => {\n      //     self.channels[i].queue[key].forEach(item => {\n      //       item.pauseMove(self.containerPos)\n      //       item.remove()\n      //     })\n      //   })\n      // }\n      for (let i = 0; i < channels.length; i++) {\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          channels[i].queue[key].forEach(item => {\n            // console.log('resized 重置:' + item)\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }\n  }\n  reset (isInit = false) {\n    this.logger && this.logger.info('reset')\n    let container = this.danmu.container\n    let self = this\n    if (self.danmu.bulletBtn && self.danmu.bulletBtn.main) {\n      self.danmu.bulletBtn.main.queue.forEach(item => {\n        item.pauseMove(self.containerPos)\n        item.remove()\n      })\n    }\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    if (self.danmu.bulletBtn && self.danmu.bulletBtn.main && self.danmu.bulletBtn.main.data) {\n      self.danmu.bulletBtn.main.data.forEach(item => {\n        item.hasAttached = false\n      })\n    }\n    function channelReset() {\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        if(self.direction === 'b2t') {\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n        } else {\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n        }\n      }\n      self.container = container\n      let fontSize = self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\n      let channelSize\n      if(self.direction === 'b2t') {\n        channelSize = Math.floor(self.width / fontSize)\n      } else {\n        channelSize = Math.floor(self.height / fontSize)\n      }\n\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }\n    if(isInit) {\n      this.resetTimer = setTimeout(channelReset, 200)\n    } else {\n      channelReset();\n    }\n  }\n  resetWithCb (cb, main) {\n    this.logger && this.logger.info('resetWithCb')\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      if(self.direction === 'b2t') {\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n      } else {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n    }\n    self.container = container\n    let fontSize = self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\n    let channelSize\n    if(self.direction === 'b2t') {\n      channelSize = Math.floor(self.width / fontSize)\n    } else {\n      channelSize = Math.floor(self.height / fontSize)\n    }\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n    self.channels = channels\n    self.channelHeight = fontSize\n    if (cb) {\n      cb(true, main)\n    }\n  }\n}\n\nexport default Channel\n","import BaseClass from './baseClass'\nimport util from './utils/util'\n\n/**\n * [Bullet 弹幕构造类]\n * @type {Class}\n */\nclass Bullet extends BaseClass {\n  constructor (danmu, options) {\n    super()\n    this.setLogger('bullet')\n    // console.log('Bullet', options)\n    // this.logger && this.logger.info('options.moveV', options.moveV)\n    this.danmu = danmu\n    this.options = options\n    this.duration = options.duration\n    this.moveV = options.moveV\n    this.id = options.id\n    this.container = danmu.container\n    this.start = options.start\n    this.prior = options.prior\n    this.color = options.color\n    this.bookChannelId = options.bookChannelId\n    this.direction = danmu.direction\n    let self = this\n    this.onChangeDirection = direction => {\n      self.direction = direction\n    }\n    this.danmu.on('changeDirection', this.onChangeDirection)\n    let el\n    this.domObj = danmu.domObj\n    if(options.el && options.el.nodeType === 1) {\n      el = this.domObj.use()\n      let copyDOM = util.copyDom(options.el)\n      if(options.eventListeners && options.eventListeners.length > 0) {\n        options.eventListeners.forEach(eventListener => {\n          copyDOM.addEventListener(eventListener.event, eventListener.listener, eventListener.useCapture || false)\n        })\n      }\n      el.appendChild(copyDOM)\n      // el = util.copyDom(options.el)\n    } else {\n      el = this.domObj.use()\n      // el = document.createElement('div')\n      el.textContent = options.txt\n    }\n    if(options.style) {\n      let style = options.style\n      Object.keys(style).forEach(function (key) {\n        util.style(el, key,  style[key])\n      })\n    }\n    if(options.mode === 'top' || options.mode === 'bottom') {\n      this.mode = options.mode\n    } else {\n      this.mode = 'scroll'\n    }\n    this.el = el\n    if (options.like && options.like.el) {\n      this.setLikeDom(options.like.el, options.like.style)\n    }\n    this.status = 'waiting'// waiting,start,end\n    let containerPos = this.container.getBoundingClientRect()\n    let random = Math.floor(Math.random() * ((containerPos.width / 10) > 100 ? 200 : containerPos.width / 10))\n    if (options.realTime) {\n      random = 0\n    }\n    let left = containerPos.width + random + 'px'\n    util.style(this.el, 'left', left)\n    this.containerPos = containerPos\n  }\n  attach () {\n    // this.logger && this.logger.info(`attach #${this.options.txt || '[DOM Element]'}#`)\n    let self = this\n    self.container.appendChild(self.el)\n    self.elPos = self.el.getBoundingClientRect()\n    if(self.direction === 'b2t') {\n      self.width = self.elPos.height\n      self.height = self.elPos.width\n    } else {\n      self.width = self.elPos.width\n      self.height = self.elPos.height\n    }\n    if(self.moveV) {\n      let containerPos = self.containerPos\n      self.duration = (containerPos.width + self.width) / self.moveV * 1000\n    }\n    if (self.danmu.config && self.danmu.config.mouseControl) {\n      self.mouseoverFunWrapper = self.mouseoverFun.bind(self)\n      self.el.addEventListener('mouseover', self.mouseoverFunWrapper, false)\n    } \n    if(self.danmu.config && self.danmu.config.mouseEnterControl){\n      self.mouseEnterFunWrapper = self.mouseoverFun.bind(self)\n      self.el.addEventListener('mouseenter', self.mouseEnterFunWrapper, false)\n    }\n  }\n  mouseoverFun (event) {\n    let self = this\n    if ((self.danmu && self.danmu.mouseControl && self.danmu.config.mouseControlPause) || self.status === 'waiting' || self.status === 'end') {\n      return\n    }\n    self.danmu && self.danmu.emit('bullet_hover', {\n      bullet: self,\n      event: event\n    })\n  }\n  detach () {\n    // this.logger && this.logger.info(`detach #${this.options.txt || '[DOM Element]'}#`)\n    let self = this\n    if(self.el) {\n      if (self.danmu.config && self.danmu.config.mouseControl) {\n        self.el.removeEventListener('mouseover', self.mouseoverFunWrapper, false)\n      } \n      if(self.danmu.config && self.danmu.config.mouseEnterControl){\n        self.el.removeEventListener('mouseenter', self.mouseEnterFunWrapper, false)\n      }\n      if(self.el.parentNode) {\n        self.el.parentNode.removeChild(self.el)\n      }\n      self.domObj.unuse(self.el)\n      self.el = null\n    }\n    this.danmu.off('changeDirection', this.onChangeDirection)\n  }\n  topInit () {\n    this.logger && this.logger.info(`topInit #${this.options.txt || '[DOM Element]'}#`)\n    if(this.direction === 'b2t') {\n      let containerPos = this.containerPos\n      util.style(this.el, 'transformOrigin', 'left top')\n      util.style(this.el, 'transform', `translateX(-${this.top}px) translateY(${containerPos.height}px) translateZ(0px) rotate(90deg)`)\n      util.style(this.el, 'transition', 'transform 0s linear 0s')\n    } else {\n      util.style(this.el, 'top', `${this.top}px`)\n    }\n  }\n  pauseMove (containerPos, isFullscreen = false) {\n    this.logger && this.logger.info(`pauseMove #${this.options.txt || '[DOM Element]'}#`)\n    // console.log('pauseMove')\n    let self = this\n    if(this.status === 'paused') {\n      return\n    }\n    if (self.status !== 'forcedPause') {\n      this.status = 'paused'\n    }\n    clearTimeout(self.removeTimer)\n    if (!this.el) {\n      return\n    }\n    util.style(this.el, 'willChange', 'auto')\n    if(this.mode === 'scroll') {\n      if(isFullscreen) {\n        let pastDuration = (new Date().getTime() - self.moveTime) / 1000\n        let pastS = pastDuration * this.moveV\n        let ratio = 0\n        let nowS = 0\n        if(self.moveMoreS - pastS >= 0) {\n          if(this.direction === 'b2t') {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerHeight\n            nowS = ratio * containerPos.height\n          } else {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerWidth\n            nowS = ratio * containerPos.width\n          }\n        } else {\n          nowS = self.moveMoreS - pastS\n        }\n        // console.log('nowS: ' + nowS)\n        if(this.direction === 'b2t') {\n          util.style(this.el, 'transform', `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`)\n        } else {\n          util.style(this.el, 'left', `${nowS}px`)\n        }\n      } else {\n        if(this.direction === 'b2t') {\n          util.style(this.el, 'transform', `translateX(-${this.top}px) translateY(${this.el.getBoundingClientRect().top - containerPos.top}px) translateZ(0px) rotate(90deg)`)\n        } else {\n          util.style(this.el, 'left', `${this.el.getBoundingClientRect().left - containerPos.left}px`)\n        }\n      }\n      if(this.direction === 'b2t') {\n        // this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n        util.style(this.el, 'transition', 'transform 0s linear 0s')\n      } else {\n        util.style(this.el, 'transform', 'translateX(0px) translateY(0px) translateZ(0px)')\n        util.style(this.el, 'transition', 'transform 0s linear 0s')\n      }\n    } else {\n      if(!this.pastDuration || !this.startTime) {\n        this.pastDuration = 1\n      } else {\n        this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime\n      }\n    }\n  }\n  startMove (containerPos, force) {\n    this.logger && this.logger.info(`startMove #${this.options.txt || '[DOM Element]'}#`)\n    let self = this\n    if (!self.hasMove) {\n      self.danmu.emit('bullet_start', self)\n      self.hasMove = true\n    }\n    if (self.status === 'forcedPause' && !force) {\n      return\n    }\n    if (!this.el) return\n    if(this.status === 'start') return\n    this.status = 'start'\n    util.style(this.el, 'willChange', 'transform')\n    function func () {\n      if (self.el) {\n        if(self.mode === 'scroll') {\n          let containerPos_ = self.containerPos\n          let bulletPos = self.el.getBoundingClientRect()\n          if(self.direction === 'b2t') {\n            if (bulletPos && bulletPos.bottom <= containerPos_.top + 100) {\n              self.status = 'end'\n              self.remove()\n            } else {\n              self.pauseMove(containerPos_)\n              if (self.danmu.bulletBtn.main.status !== 'paused') {\n                self.startMove(containerPos_)\n              }\n            }\n          } else {\n            if (bulletPos && bulletPos.right <= containerPos_.left + 100) {\n              self.status = 'end'\n              self.remove()\n            } else {\n              self.pauseMove(containerPos_)\n              if (self.danmu.bulletBtn.main.status !== 'paused') {\n                self.startMove(containerPos_)\n              }\n            }\n          }\n        } else {\n          self.status = 'end'\n          self.remove()\n        }\n      }\n    }\n    if(this.mode === 'scroll') {\n      if(this.direction === 'b2t') {\n        this.moveV = (containerPos.height + this.height) / this.duration * 1000\n        let leftDuration = (self.el.getBoundingClientRect().bottom - containerPos.top) / this.moveV\n        util.style(this.el, 'transition', `transform ${leftDuration}s linear 0s`)\n        this.startMoveTimer = setTimeout(function () {\n          if (self.el) {\n            util.style(self.el, 'transform', `translateX(-${self.top}px) translateY(-${self.height}px) translateZ(0px) rotate(90deg)`)\n            self.moveTime = new Date().getTime()\n            self.moveMoreS = self.el.getBoundingClientRect().top - containerPos.top\n            self.moveContainerHeight = containerPos.height\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\n          }\n        }, 20)\n      } else {\n        let bulletPos = this.el.getBoundingClientRect()\n        this.moveV = (containerPos.width + this.width) / this.duration * 1000\n        let leftDuration = (bulletPos.right - containerPos.left) / this.moveV\n        util.style(this.el, 'transition', `transform ${leftDuration}s linear 0s`)\n        // this.el.style.left = bulletPos.left + 'px'\n        this.startMoveTimer = setTimeout(function () {\n          if (self.el) {\n            let bulletPos = self.el.getBoundingClientRect()\n            // self.el.style.left = bulletPos.left + 'px'\n            let v = (bulletPos.right - containerPos.left) / leftDuration\n            // console.log(`${self.id} 距离: ${bulletPos.right - containerPos.left}px 时间: ${leftDuration} 速度: ${v} 预定速度: ${self.moveV}`)\n            // console.log(`${self.id} translateX(-${bulletPos.right - containerPos.left}px) translateY(0px) translateZ(0px)`)\n              \n            if(bulletPos.right > containerPos.left && v > self.moveV - 1 && v < self.moveV + 1) {\n              util.style(self.el, 'transform', `translateX(-${bulletPos.right - containerPos.left}px) translateY(0px) translateZ(0px)`)\n              self.moveTime = new Date().getTime()\n              self.moveMoreS = bulletPos.left - containerPos.left\n              self.moveContainerWidth = containerPos.width\n              self.removeTimer = setTimeout(func, leftDuration * 1000)\n            } else {\n              self.status = 'end'\n              self.remove()\n            }\n          }\n        }, 0)\n      }\n    } else {\n      // this.el.style.width = `${this.width}px`\n      // this.el.style.height = `${this.height}px`\n      util.style(this.el, 'left', '50%');\n      util.style(this.el, 'margin', `0 0 0 -${this.width/2}px`)\n      if(!this.pastDuration) {\n        this.pastDuration = 1\n      }\n      let leftDuration = this.duration >= this.pastDuration ? this.duration - this.pastDuration : 0\n      this.removeTimer = setTimeout(func, leftDuration)\n      this.startTime = new Date().getTime()\n    }\n  }\n  remove () {\n    this.logger && this.logger.info(`remove #${this.options.txt || '[DOM Element]'}#`)\n    // console.log('remove')\n    let self = this\n    if (this.removeTimer) {\n      clearTimeout(this.removeTimer)\n    }\n    if (this.startMoveTimer) {\n      clearTimeout(this.startMoveTimer)\n    }\n    if (self.el && self.el.parentNode) {\n      util.style(self.el, 'willChange', 'auto')\n      self.detach()\n      self.danmu.emit('bullet_remove', {\n        bullet: self\n      })\n    }\n  }\n  setFontSize (size) {\n    if (this.el) {\n      this.el.style[ 'fontSize' ] = size\n    }\n  }\n  setLikeDom (el, style) {\n    if (el) {\n      Object.keys(style).forEach(function (key) {\n        el.style[key] = style[key]\n      })\n      let likeClass = 'danmu-like'\n      el.className = likeClass\n      if (this.el) {\n        let children = this.el.querySelector('.' + likeClass)\n        if (children) {\n          this.el.removeChild(children)\n        }\n        this.el.innerHTML = `${this.el.innerHTML}${el.outerHTML}`\n      }\n    }\n    return el\n  }\n}\n\nexport default Bullet\n","import util from './utils/util'\n\nexport default class RecyclableDOMList {\n  constructor(options) {\n    options = {\n      initDOM: () => document.createElement('div'),\n      initSize: 10\n    }\n    this.init(options)\n  }\n\n  init(options) {\n    this.idleList = []\n    this.usingList = []\n    this._id = 0\n    this.options = options\n    this._expand(options.initSize)\n  }\n\n  use() {\n    if (!this.idleList.length) {\n      this._expand(1)\n    }\n    const firseIdle = this.idleList.shift()\n    this.usingList.push(firseIdle)\n    return firseIdle\n  }\n\n  unuse(dom) {\n    const idx = this.usingList.indexOf(dom)\n    if (idx < 0) {\n      return\n    }\n    this.usingList.splice(idx, 1)\n    dom.innerHTML = ''\n    dom.textcontent = ''\n    this.clearElementStyle(dom)\n    this.idleList.push(dom)\n  }\n\n  _expand(size) {\n    for (let i = 0; i < size; i++) {\n      this.idleList.push(this.options.initDOM(this._id++))\n    }\n  }\n\n  destroy() {\n    for (let i = 0; i < this.idleList.length; i++) {\n      this.idleList[i].innerHTML = ''\n      this.idleList[i].textcontent = ''\n      this.clearElementStyle(this.idleList[i])\n    }\n    for (let i = 0; i < this.usingList.length; i++) {\n      this.usingList[i].innerHTML = ''\n      this.usingList[i].textcontent = ''\n      this.clearElementStyle(this.usingList[i])\n    }\n    for (let k in this) {\n      delete this[k]\n    }\n  }\n\n  clearElementStyle(element) {\n    const ua = typeof (window) !== 'undefined' ? window.navigator.userAgent : null\n    if (!ua) {\n      return\n    }\n    if(ua.indexOf('MSIE ') > -1 || ua.indexOf('Trident/') > -1) {\n      util.style(element, 'transform', 'none')\n    } else {\n      element.setAttribute('style', '')\n    }\n  }\n}","class ResizeObserver {\n  constructor () {\n    this.__handlers = []\n    if (!window.ResizeObserver) {\n      return\n    }\n    try {\n      this.observer = new window.ResizeObserver((entries) => {\n        const t = new Date().getTime()\n        if (t - this.timeStampe < 200) {\n          return\n        }\n        this.timeStampe = t\n        this.__trigger(entries)\n      })\n      this.timeStampe = new Date().getTime()\n    // eslint-disable-next-line no-empty\n    } catch (err) {}\n  }\n\n  addObserver (target, handler) {\n    if (!this.observer) {\n      return\n    }\n    this.observer && this.observer.observe(target)\n    const {__handlers} = this\n    let index = -1\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        index = i\n      }\n    }\n    if (index > -1) {\n      this.__handlers[index].handler.push(handler)\n    } else {\n      this.__handlers.push({\n        target,\n        handler: [handler]\n      })\n    }\n  }\n\n  unObserver (target) {\n    let i = -1\n    this.__handlers.map((item, index) => {\n      if (target === item.target) {\n        i = index\n      }\n    })\n    this.observer && this.observer.unobserve(target)\n    i > -1 && this.__handlers.splice(i, 1)\n  }\n\n  destroyObserver () {\n    this.observer && this.observer.disconnect()\n    this.observer = null\n    this.__handlers = null\n  }\n\n  __runHandler (target) {\n    const {__handlers} = this\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        __handlers[i].handler && __handlers[i].handler.map(handler => {\n          try {\n            handler()\n          } catch (error) {\n            console.error(error)\n          }\n        })\n        break\n      }\n    }\n  }\n  \n  __trigger (entries) {\n    entries.map(item => {\n      this.__runHandler(item.target)\n    })\n  }\n}\n\nconst resizeObserver = new ResizeObserver()\n\nfunction addObserver (target, handler) {\n  resizeObserver.addObserver(target, handler)\n}\n\nfunction unObserver (target, handler) {\n  resizeObserver.unObserver(target, handler)\n}\n\nfunction destroyObserver (target, handler) {\n  resizeObserver.destroyObserver(target, handler)\n}\n\nexport {\n  addObserver,\n  unObserver,\n  destroyObserver\n}","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}