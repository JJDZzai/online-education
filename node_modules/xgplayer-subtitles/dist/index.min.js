!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.XgSubtitle=e())}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=F(e),this.reject=F(n)}function r(t){var e=t.length;return 3===e?(60*(60*Number(t[0])+Number(t[1]))*1e3+1e3*Number(t[2]))/1e3:2===e?(60*Number(t[0])*1e3+1e3*Number(t[1]))/1e3:Number(t[0])}function i(t){return/^(\-|\+)?\d+(\.\d+)?$/.test(t)}function o(t){return t}function s(t,e){return t>=0&&t<e.length?e[t]:""}function a(t,e){if(!t)return!1;if(t.classList)return Array.prototype.some.call(t.classList,function(t){return t===e});var n=t.className&&"object"===Je(t.className)?t.getAttribute("class"):t.className;return n&&!!n.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function u(t,e){t&&(t.classList?e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)}):a(t,e)||(t.className&&"object"===Je(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e))}function c(t,e){t&&(t.classList?e.split(/\s+/g).forEach(function(e){t.classList.remove(e)}):a(t,e)&&e.split(/\s+/g).forEach(function(e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===Je(t.className)?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")}))}function l(t,e,n){var r=e.length;if(r<1)return-1;if(n=n<0?0:n>=r?r-1:n,e[n].start<=t&&t<e[n].end)return n;for(var i=e[n].end<=t?n+1:0;i<r;i++){if(e[i].start<=t&&t<e[i].end)return i;if(t>e[i].end&&i+1<r&&t<e[i+1].start)return-1;if(t>e[i].end&&i+1>=r)return-1}return-1}function f(t,e,n){var r=e.length;if(r<1)return[];var i=[];if((n=n<0?0:n>=r?r-1:n)<r)for(var o=e[n].end<=t?n:0;o<r&&(e[o].start<=t&&t<e[o].end&&i.push(o),!(t<e[o].start));o++);return i}function h(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(t);return i.className=r,i.innerHTML=e,kr(n).forEach(function(e){var r=e,o=n[e];"video"===t||"audio"===t||"live-video"===t?o&&i.setAttribute(r,o):i.setAttribute(r,o)}),i}function p(){var t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),n=/(?:SymbianOS)/.test(t)||e,r=/(?:Android)/.test(t),i=/(?:Firefox)/.test(t),o=/(?:iPad|PlayBook)/.test(t)||r&&!/(?:Mobile)/.test(t)||i&&/(?:Tablet)/.test(t);return/(?:iPhone)/.test(t)&&!o||r||n||o}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";t.map(function(t){n+=" "+e+" "+t.key+" {"+t.style+"}"});var r=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(r.type="text/css",r.id="ssss",r.styleSheet){var o=function(){try{r.styleSheet.cssText=n}catch(t){}};r.styleSheet.disabled?setTimeout(o,10):o()}else{var s=document.createTextNode(n);r.appendChild(s)}i.appendChild(r)}function y(t,e){Ir||(Ir=new Lr),Ir.addObserver(t,e)}function g(t,e){Ir&&Ir.unObserver(t,e)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={code:Fr[t].code,msg:Fr[t].msg};return kr(e).map(function(t){n[t]=e[t]}),n}function _(t,e,n,r,i){i?n(m(2,i),{format:r.format}):r.format?(t.list=r.list,t.format=r.format,t.styles=r.styles,e(t)):n(m(3))}function x(t){return new xr(function(e,n){if(t.list)return void e(t);if(t.json){var r=Nr.parseJson(t.json);return t.list=r,t.format="json",void e(t)}if(t.stringContent&&!t.url)Nr.parse(t.stringContent,function(r,i){_(t,e,n,r,i)});else if(t.url)new Tr({url:t.url,type:"text"}).then(function(r){Nr.parse(r.res.response,function(r,i){_(t,e,n,r,i)})}).catch(function(e){var r=m(1,{statusText:e.statusText,status:e.status,type:e.type,message:"http load error",url:t.url});n(r)});else{var i=m(8);n(i)}})}function b(t,e){return!!(t.id&&t.id===e.id||t.language&&t.language===e.language)}var k=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},w=function(t){return Object(k(t))},T={}.hasOwnProperty,S=function(t,e){return T.call(t,e)},O=e(function(t){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)}),E=(O.version,e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),P=e(function(t){var e=E["__core-js_shared__"]||(E["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:O.version,mode:"pure",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),j=0,M=Math.random(),A=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++j+M).toString(36))},C=P("keys"),R=function(t){return C[t]||(C[t]=A(t))},N=R("IE_PROTO"),L=Object.prototype,I=Object.getPrototypeOf||function(t){return t=w(t),S(t,N)?t[N]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?L:null},F=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},z=function(t,e,n){if(F(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},B=function(t){return"object"==typeof t?null!==t:"function"==typeof t},D=function(t){if(!B(t))throw TypeError(t+" is not an object!");return t},H=function(t){try{return!!t()}catch(t){return!0}},V=!H(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),W=E.document,G=B(W)&&B(W.createElement),U=function(t){return G?W.createElement(t):{}},$=!V&&!H(function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a}),K=function(t,e){if(!B(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!B(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!B(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!B(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},J=Object.defineProperty,Y={f:V?Object.defineProperty:function(t,e,n){if(D(t),e=K(e,!0),D(n),$)try{return J(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},X=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},q=V?function(t,e,n){return Y.f(t,e,X(1,n))}:function(t,e,n){return t[e]=n,t},Z=function(t,e,n){var r,i,o,s=t&Z.F,a=t&Z.G,u=t&Z.S,c=t&Z.P,l=t&Z.B,f=t&Z.W,h=a?O:O[e]||(O[e]={}),d=h.prototype,p=a?E:u?E[e]:(E[e]||{}).prototype;a&&(n=e);for(r in n)(i=!s&&p&&void 0!==p[r])&&S(h,r)||(o=i?p[r]:n[r],h[r]=a&&"function"!=typeof p[r]?n[r]:l&&i?z(o,E):f&&p[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(o):c&&"function"==typeof o?z(Function.call,o):o,c&&((h.virtual||(h.virtual={}))[r]=o,t&Z.R&&d&&!d[r]&&q(d,r,o)))};Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128;var Q=Z,tt=function(t,e){var n=(O.Object||{})[t]||Object[t],r={};r[t]=e(n),Q(Q.S+Q.F*H(function(){n(1)}),"Object",r)};tt("getPrototypeOf",function(){return function(t){return I(w(t))}});var et=O.Object.getPrototypeOf,nt=t(e(function(t){t.exports={default:et,__esModule:!0}})),rt=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),it=Math.ceil,ot=Math.floor,st=function(t){return isNaN(t=+t)?0:(t>0?ot:it)(t)},at=q,ut={},ct={}.toString,lt=function(t){return ct.call(t).slice(8,-1)},ft=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==lt(t)?t.split(""):Object(t)},ht=function(t){return ft(k(t))},dt=Math.min,pt=function(t){return t>0?dt(st(t),9007199254740991):0},vt=Math.max,yt=Math.min,gt=function(t,e){return t=st(t),t<0?vt(t+e,0):yt(t,e)},mt=function(t){return function(e,n,r){var i,o=ht(e),s=pt(o.length),a=gt(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}}(!1),_t=R("IE_PROTO"),xt=function(t,e){var n,r=ht(t),i=0,o=[];for(n in r)n!=_t&&S(r,n)&&o.push(n);for(;e.length>i;)S(r,n=e[i++])&&(~mt(o,n)||o.push(n));return o},bt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),kt=Object.keys||function(t){return xt(t,bt)},wt=V?Object.defineProperties:function(t,e){D(t);for(var n,r=kt(e),i=r.length,o=0;i>o;)Y.f(t,n=r[o++],e[n]);return t},Tt=E.document,St=Tt&&Tt.documentElement,Ot=R("IE_PROTO"),Et=function(){},Pt=function(){var t,e=U("iframe"),n=bt.length;for(e.style.display="none",St.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Pt=t.F;n--;)delete Pt.prototype[bt[n]];return Pt()},jt=Object.create||function(t,e){var n;return null!==t?(Et.prototype=D(t),n=new Et,Et.prototype=null,n[Ot]=t):n=Pt(),void 0===e?n:wt(n,e)},Mt=e(function(t){var e=P("wks"),n=E.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:A)("Symbol."+t))}).store=e}),At=Y.f,Ct=Mt("toStringTag"),Rt=function(t,e,n){t&&!S(t=n?t:t.prototype,Ct)&&At(t,Ct,{configurable:!0,value:e})},Nt={};q(Nt,Mt("iterator"),function(){return this});var Lt=function(t,e,n){t.prototype=jt(Nt,{next:X(1,n)}),Rt(t,e+" Iterator")},It=Mt("iterator"),Ft=!([].keys&&"next"in[].keys()),zt=function(){return this},Bt=function(t,e,n,r,i,o,s){Lt(n,e,r);var a,u,c,l=function(t){if(!Ft&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h="values"==i,d=!1,p=t.prototype,v=p[It]||p["@@iterator"]||i&&p[i],y=v||l(i),g=i?h?l("entries"):y:void 0,m="Array"==e?p.entries||v:v;if(m&&(c=I(m.call(new t)))!==Object.prototype&&c.next&&Rt(c,f,!0),h&&v&&"values"!==v.name&&(d=!0,y=function(){return v.call(this)}),s&&(Ft||d||!p[It])&&q(p,It,y),ut[e]=y,ut[f]=zt,i)if(a={values:h?y:l("values"),keys:o?y:l("keys"),entries:g},s)for(u in a)u in p||at(p,u,a[u]);else Q(Q.P+Q.F*(Ft||d),e,a);return a},Dt=function(t){return function(e,n){var r,i,o=String(k(e)),s=st(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s),r<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536)}}(!0);Bt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Dt(e,n),this._i+=t.length,{value:t,done:!1})});var Ht=function(t,e){return{value:e,done:!!t}};Bt(Array,"Array",function(t,e){this._t=ht(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ht(1)):"keys"==e?Ht(0,n):"values"==e?Ht(0,t[n]):Ht(0,[n,t[n]])},"values");ut.Arguments=ut.Array;for(var Vt=Mt("toStringTag"),Wt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Gt=0;Gt<Wt.length;Gt++){var Ut=Wt[Gt],$t=E[Ut],Kt=$t&&$t.prototype;Kt&&!Kt[Vt]&&q(Kt,Vt,Ut),ut[Ut]=ut.Array}var Jt={f:Mt},Yt=Jt.f("iterator"),Xt=e(function(t){t.exports={default:Yt,__esModule:!0}});t(Xt);var qt=e(function(t){var e=A("meta"),n=Y.f,r=0,i=Object.isExtensible||function(){return!0},o=!H(function(){return i(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=function(t,n){if(!B(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!S(t,e)){if(!i(t))return"F";if(!n)return"E";s(t)}return t[e].i},u=function(t,n){if(!S(t,e)){if(!i(t))return!0;if(!n)return!1;s(t)}return t[e].w},c=function(t){return o&&l.NEED&&i(t)&&!S(t,e)&&s(t),t},l=t.exports={KEY:e,NEED:!1,fastKey:a,getWeak:u,onFreeze:c}}),Zt=(qt.KEY,qt.NEED,qt.fastKey,qt.getWeak,qt.onFreeze,Y.f),Qt=function(t){var e=O.Symbol||(O.Symbol={});"_"==t.charAt(0)||t in e||Zt(e,t,{value:Jt.f(t)})},te={f:Object.getOwnPropertySymbols},ee={f:{}.propertyIsEnumerable},ne=function(t){var e=kt(t),n=te.f;if(n)for(var r,i=n(t),o=ee.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e},re=Array.isArray||function(t){return"Array"==lt(t)},ie=bt.concat("length","prototype"),oe={f:Object.getOwnPropertyNames||function(t){return xt(t,ie)}},se=oe.f,ae={}.toString,ue="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ce=function(t){try{return se(t)}catch(t){return ue.slice()}},le={f:function(t){return ue&&"[object Window]"==ae.call(t)?ce(t):se(ht(t))}},fe=Object.getOwnPropertyDescriptor,he={f:V?fe:function(t,e){if(t=ht(t),e=K(e,!0),$)try{return fe(t,e)}catch(t){}if(S(t,e))return X(!ee.f.call(t,e),t[e])}},de=qt.KEY,pe=he.f,ve=Y.f,ye=le.f,ge=E.Symbol,me=E.JSON,_e=me&&me.stringify,xe=Mt("_hidden"),be=Mt("toPrimitive"),ke={}.propertyIsEnumerable,we=P("symbol-registry"),Te=P("symbols"),Se=P("op-symbols"),Oe=Object.prototype,Ee="function"==typeof ge&&!!te.f,Pe=E.QObject,je=!Pe||!Pe.prototype||!Pe.prototype.findChild,Me=V&&H(function(){return 7!=jt(ve({},"a",{get:function(){return ve(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=pe(Oe,e);r&&delete Oe[e],ve(t,e,n),r&&t!==Oe&&ve(Oe,e,r)}:ve,Ae=function(t){var e=Te[t]=jt(ge.prototype);return e._k=t,e},Ce=Ee&&"symbol"==typeof ge.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof ge},Re=function(t,e,n){return t===Oe&&Re(Se,e,n),D(t),e=K(e,!0),D(n),S(Te,e)?(n.enumerable?(S(t,xe)&&t[xe][e]&&(t[xe][e]=!1),n=jt(n,{enumerable:X(0,!1)})):(S(t,xe)||ve(t,xe,X(1,{})),t[xe][e]=!0),Me(t,e,n)):ve(t,e,n)},Ne=function(t,e){D(t);for(var n,r=ne(e=ht(e)),i=0,o=r.length;o>i;)Re(t,n=r[i++],e[n]);return t},Le=function(t,e){return void 0===e?jt(t):Ne(jt(t),e)},Ie=function(t){var e=ke.call(this,t=K(t,!0));return!(this===Oe&&S(Te,t)&&!S(Se,t))&&(!(e||!S(this,t)||!S(Te,t)||S(this,xe)&&this[xe][t])||e)},Fe=function(t,e){if(t=ht(t),e=K(e,!0),t!==Oe||!S(Te,e)||S(Se,e)){var n=pe(t,e);return!n||!S(Te,e)||S(t,xe)&&t[xe][e]||(n.enumerable=!0),n}},ze=function(t){for(var e,n=ye(ht(t)),r=[],i=0;n.length>i;)S(Te,e=n[i++])||e==xe||e==de||r.push(e);return r},Be=function(t){for(var e,n=t===Oe,r=ye(n?Se:ht(t)),i=[],o=0;r.length>o;)!S(Te,e=r[o++])||n&&!S(Oe,e)||i.push(Te[e]);return i};Ee||(at((ge=function(){if(this instanceof ge)throw TypeError("Symbol is not a constructor!");var t=A(arguments.length>0?arguments[0]:void 0),e=function(n){this===Oe&&e.call(Se,n),S(this,xe)&&S(this[xe],t)&&(this[xe][t]=!1),Me(this,t,X(1,n))};return V&&je&&Me(Oe,t,{configurable:!0,set:e}),Ae(t)}).prototype,"toString",function(){return this._k}),he.f=Fe,Y.f=Re,oe.f=le.f=ze,ee.f=Ie,te.f=Be,Jt.f=function(t){return Ae(Mt(t))}),Q(Q.G+Q.W+Q.F*!Ee,{Symbol:ge});for(var De="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),He=0;De.length>He;)Mt(De[He++]);for(var Ve=kt(Mt.store),We=0;Ve.length>We;)Qt(Ve[We++]);Q(Q.S+Q.F*!Ee,"Symbol",{for:function(t){return S(we,t+="")?we[t]:we[t]=ge(t)},keyFor:function(t){if(!Ce(t))throw TypeError(t+" is not a symbol!");for(var e in we)if(we[e]===t)return e},useSetter:function(){je=!0},useSimple:function(){je=!1}}),Q(Q.S+Q.F*!Ee,"Object",{create:Le,defineProperty:Re,defineProperties:Ne,getOwnPropertyDescriptor:Fe,getOwnPropertyNames:ze,getOwnPropertySymbols:Be});var Ge=H(function(){te.f(1)});Q(Q.S+Q.F*Ge,"Object",{getOwnPropertySymbols:function(t){return te.f(w(t))}}),me&&Q(Q.S+Q.F*(!Ee||H(function(){var t=ge();return"[null]"!=_e([t])||"{}"!=_e({a:t})||"{}"!=_e(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(B(e)||void 0!==t)&&!Ce(t))return re(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ce(e))return e}),r[1]=e,_e.apply(me,r)}}),ge.prototype[be]||q(ge.prototype,be,ge.prototype.valueOf),Rt(ge,"Symbol"),Rt(Math,"Math",!0),Rt(E.JSON,"JSON",!0),Qt("asyncIterator"),Qt("observable");var Ue=O.Symbol,$e=e(function(t){t.exports={default:Ue,__esModule:!0}});t($e);var Ke=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(Xt),i=n($e),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}}),Je=t(Ke),Ye=t(e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(Ke);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,n.default)(e))&&"function"!=typeof e?t:e}}));Q(Q.S+Q.F*!V,"Object",{defineProperty:Y.f});var Xe=O.Object,qe=function(t,e,n){return Xe.defineProperty(t,e,n)},Ze=e(function(t){t.exports={default:qe,__esModule:!0}});t(Ze);var Qe=t(e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(Ze);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()})),tn=function(t,e){if(D(t),!B(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},en={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=z(Function.call,he.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return tn(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:tn};Q(Q.S,"Object",{setPrototypeOf:en.set});var nn=O.Object.setPrototypeOf,rn=e(function(t){t.exports={default:nn,__esModule:!0}});t(rn),Q(Q.S,"Object",{create:jt});var on=O.Object,sn=function(t,e){return on.create(t,e)},an=e(function(t){t.exports={default:sn,__esModule:!0}});t(an);var un,cn,ln,fn=t(e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(rn),i=n(an),o=n(Ke);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}})),hn=Mt("toStringTag"),dn="Arguments"==lt(function(){return arguments}()),pn=function(t,e){try{return t[e]}catch(t){}},vn=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=pn(e=Object(t),hn))?n:dn?lt(e):"Object"==(r=lt(e))&&"function"==typeof e.callee?"Arguments":r},yn=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},gn=function(t,e,n,r){try{return r?e(D(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&D(i.call(t)),e}},mn=Mt("iterator"),_n=Array.prototype,xn=function(t){return void 0!==t&&(ut.Array===t||_n[mn]===t)},bn=Mt("iterator"),kn=O.getIteratorMethod=function(t){if(void 0!=t)return t[bn]||t["@@iterator"]||ut[vn(t)]},wn=e(function(t){var e={},n={},r=t.exports=function(t,r,i,o,s){var a,u,c,l,f=s?function(){return t}:kn(t),h=z(i,o,r?2:1),d=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(xn(f)){for(a=pt(t.length);a>d;d++)if((l=r?h(D(u=t[d])[0],u[1]):h(t[d]))===e||l===n)return l}else for(c=f.call(t);!(u=c.next()).done;)if((l=gn(c,h,u.value,r))===e||l===n)return l};r.BREAK=e,r.RETURN=n}),Tn=Mt("species"),Sn=function(t,e){var n,r=D(t).constructor;return void 0===r||void 0==(n=D(r)[Tn])?e:F(n)},On=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},En=E.process,Pn=E.setImmediate,jn=E.clearImmediate,Mn=E.MessageChannel,An=E.Dispatch,Cn=0,Rn={},Nn=function(){var t=+this;if(Rn.hasOwnProperty(t)){var e=Rn[t];delete Rn[t],e()}},Ln=function(t){Nn.call(t.data)};Pn&&jn||(Pn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Rn[++Cn]=function(){On("function"==typeof t?t:Function(t),e)},un(Cn),Cn},jn=function(t){delete Rn[t]},"process"==lt(En)?un=function(t){En.nextTick(z(Nn,t,1))}:An&&An.now?un=function(t){An.now(z(Nn,t,1))}:Mn?(ln=(cn=new Mn).port2,cn.port1.onmessage=Ln,un=z(ln.postMessage,ln,1)):E.addEventListener&&"function"==typeof postMessage&&!E.importScripts?(un=function(t){E.postMessage(t+"","*")},E.addEventListener("message",Ln,!1)):un="onreadystatechange"in U("script")?function(t){St.appendChild(U("script")).onreadystatechange=function(){St.removeChild(this),Nn.call(t)}}:function(t){setTimeout(z(Nn,t,1),0)});var In={set:Pn,clear:jn},Fn=In.set,zn=E.MutationObserver||E.WebKitMutationObserver,Bn=E.process,Dn=E.Promise,Hn="process"==lt(Bn),Vn={f:function(t){return new n(t)}},Wn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Gn=E.navigator,Un=Gn&&Gn.userAgent||"",$n=function(t,e){if(D(t),B(e)&&e.constructor===t)return e;var n=Vn.f(t);return(0,n.resolve)(e),n.promise},Kn=Mt("species"),Jn=Mt("iterator"),Yn=!1;try{var Xn=[7][Jn]();Xn.return=function(){Yn=!0},Array.from(Xn,function(){throw 2})}catch(t){}var qn,Zn,Qn,tr,er=In.set,nr=function(){var t,e,n,r=function(){var r,i;for(Hn&&(r=Bn.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Hn)n=function(){Bn.nextTick(r)};else if(!zn||E.navigator&&E.navigator.standalone)if(Dn&&Dn.resolve){var i=Dn.resolve(void 0);n=function(){i.then(r)}}else n=function(){Fn.call(E,r)};else{var o=!0,s=document.createTextNode("");new zn(r).observe(s,{characterData:!0}),n=function(){s.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),rr=E.TypeError,ir=E.process,or=ir&&ir.versions,sr=or&&or.v8||"",ar=E.Promise,ur="process"==vn(ir),cr=function(){},lr=Zn=Vn.f,fr=!!function(){try{var t=ar.resolve(1),e=(t.constructor={})[Mt("species")]=function(t){t(cr,cr)};return(ur||"function"==typeof PromiseRejectionEvent)&&t.then(cr)instanceof e&&0!==sr.indexOf("6.6")&&-1===Un.indexOf("Chrome/66")}catch(t){}}(),hr=function(t){var e;return!(!B(t)||"function"!=typeof(e=t.then))&&e},dr=function(t,e){if(!t._n){t._n=!0;var n=t._c;nr(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,s,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{a?(i||(2==t._h&&yr(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===e.promise?c(rr("Promise-chain cycle")):(o=hr(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!s&&l.exit(),c(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&pr(t)})}},pr=function(t){er.call(E,function(){var e,n,r,i=t._v,o=vr(t);if(o&&(e=Wn(function(){ur?ir.emit("unhandledRejection",i,t):(n=E.onunhandledrejection)?n({promise:t,reason:i}):(r=E.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=ur||vr(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},vr=function(t){return 1!==t._h&&0===(t._a||t._c).length},yr=function(t){er.call(E,function(){var e;ur?ir.emit("rejectionHandled",t):(e=E.onrejectionhandled)&&e({promise:t,reason:t._v})})},gr=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),dr(e,!0))},mr=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw rr("Promise can't be resolved itself");(e=hr(t))?nr(function(){var r={_w:n,_d:!1};try{e.call(t,z(mr,r,1),z(gr,r,1))}catch(t){gr.call(r,t)}}):(n._v=t,n._s=1,dr(n,!1))}catch(t){gr.call({_w:n,_d:!1},t)}}};fr||(ar=function(t){yn(this,ar,"Promise","_h"),F(t),qn.call(this);try{t(z(mr,this,1),z(gr,this,1))}catch(t){gr.call(this,t)}},(qn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:q(t,r,e[r]);return t}(ar.prototype,{then:function(t,e){var n=lr(Sn(this,ar));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=ur?ir.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&dr(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Qn=function(){var t=new qn;this.promise=t,this.resolve=z(mr,t,1),this.reject=z(gr,t,1)},Vn.f=lr=function(t){return t===ar||t===tr?new Qn(t):Zn(t)}),Q(Q.G+Q.W+Q.F*!fr,{Promise:ar}),Rt(ar,"Promise"),function(t){var e="function"==typeof O[t]?O[t]:E[t];V&&e&&!e[Kn]&&Y.f(e,Kn,{configurable:!0,get:function(){return this}})}("Promise"),tr=O.Promise,Q(Q.S+Q.F*!fr,"Promise",{reject:function(t){var e=lr(this);return(0,e.reject)(t),e.promise}}),Q(Q.S+!0*Q.F,"Promise",{resolve:function(t){return $n(this===tr?ar:this,t)}}),Q(Q.S+Q.F*!(fr&&function(t,e){if(!e&&!Yn)return!1;var n=!1;try{var r=[7],i=r[Jn]();i.next=function(){return{done:n=!0}},r[Jn]=function(){return i},t(r)}catch(t){}return n}(function(t){ar.all(t).catch(cr)})),"Promise",{all:function(t){var e=this,n=lr(e),r=n.resolve,i=n.reject,o=Wn(function(){var n=[],o=0,s=1;wn(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=lr(e),r=n.reject,i=Wn(function(){wn(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),Q(Q.P+Q.R,"Promise",{finally:function(t){var e=Sn(this,O.Promise||E.Promise),n="function"==typeof t;return this.then(n?function(n){return $n(e,t()).then(function(){return n})}:t,n?function(n){return $n(e,t()).then(function(){throw n})}:t)}}),Q(Q.S,"Promise",{try:function(t){var e=Vn.f(this),n=Wn(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var _r=O.Promise,xr=t(e(function(t){t.exports={default:_r,__esModule:!0}}));tt("keys",function(){return function(t){return kt(w(t))}});var br=O.Object.keys,kr=t(e(function(t){t.exports={default:br,__esModule:!0}})),wr=e(function(t){function e(){}function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(t,e,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new n(r,i||t,o),u=a?a+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function i(t,n){0==--t._eventsCount?t._events=new e:delete t._events[n]}function o(){this._events=new e,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(e.prototype=Object.create(null),(new e).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=a?a+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},o.prototype.listenerCount=function(t){var e=a?a+t:t,n=this._events[e];return n?n.fn?1:n.length:0},o.prototype.emit=function(t,e,n,r,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){return r(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return r(this,t,e,n,!0)},o.prototype.removeListener=function(t,e,n,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||i(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||r&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this},o.prototype.removeAllListeners=function(t){var n;return t?(n=a?a+t:t,this._events[n]&&i(this,n)):(this._events=new e,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,t.exports=o}),Tr=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,r=e.method,i=void 0===r?"GET":r,o=e.type,s=void 0===o?"arraybuffer":o,a=e.timeout,u=void 0===a?1e4:a,c=e.data,l=void 0===c?{}:c,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rt(this,t),new xr(function(t,e){var r=new window.XMLHttpRequest,o=i.toUpperCase(),a=[];s&&(r.responseType=s),u&&(r.timeout=u);for(var c in l)a.push("k="+l[c]);if(r.onload=function(){200===r.status||206===r.status?t({context:f,res:r}):e(new Error({context:f,res:r,type:"error"}))},r.onerror=function(t){e(new Error({context:f,res:r,type:"error"}))},r.ontimeout=function(t){e(new Error({context:f,res:r,type:"error"}))},r.onabort=function(){e(new Error({context:f,res:r,type:"error"}))},"GET"===o)r.open(o,""+n),r.send();else{if("post"!==o)throw new Error("xhr "+o+" is not supported");r.open(o,n),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a.join("&"))}})},Sr=/^WEBVTT/,Or=/^STYLE+$/,Er=/^\:\:cue/,Pr=/^}+$/,jr=/^\[Script Info\].*/,Mr=[/[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}/,/[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}\.[0-9]{3}/,/[0-9]{2}\.[0-9]{3}-->[0-9]{2}\.[0-9]{3}/],Ar=/^Format:\s/,Cr=/^Style:\s/,Rr=/^Dialogue:\s/,Nr=function(){function t(){rt(this,t)}return Qe(t,null,[{key:"parseJson",value:function(t){for(var e=[],n=0,r=0;r<t.length;r++){if(n>=50&&(n=0),0===n){var i={start:t[r].start,list:[t[r]],end:t[r].end};e.push(i)}else e[e.length-1].list.push(t[r]),e[e.length-1].end=t[r].end;n++}return e}},{key:"parse",value:function(e,n){var r=t.checkFormat(e);r||n({format:r});try{var i=[];"ass"===r?i=t.parseASS(e):"vtt"===r&&(i=t.parseVTT(e)),n({format:r,list:i.list,styles:i.styles})}catch(t){console.error(t),n({format:r},t)}}},{key:"parseASSItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.split(","),i={},s="";try{var a=n.length-e.length;return s=a>0?n.splice(e.length-1,a+1).join(",")+"":n[n.length-1]+"",s=s.replace(/\\n+/g,""),s=o(s),n[e.length-1]=s,e.map(function(t,e){"end"===t||"start"===t?i[t]=r(n[e].split(":")):"text"===t?i[t]=[n[e]]:"layer"===t?(i[t]=[n[e]],i.textTag=[n[e]]):i[t]="style"===t?[n[e]]:Number(n[e])?Number(n[e]):n[e]}),i}catch(t){return console.error(t),{}}}},{key:"parseASS",value:function(e){for(var n=e.split("\n"),r=[],i=0,o=0,s=[],a=[],u=null;i<n.length;){if(Ar.test(n[i]))a=(a=n[i].replace(Ar,"").replace(/\s+/g,"").split(",")).map(function(t){return t.toLocaleLowerCase()});else if(Cr.test(n[i]))s.push(n[i].replace(Cr,"").replace(/\s+/g,""));else if(Rr.test(n[i])){var c=t.parseASSItem(n[i].replace(Rr,""),a);if(u&&c.start===u.start&&c.end===u.end)try{var l=u,f=l.text,h=l.textTag,d=l.style;f.push(c.text[0]),h.push(c.textTag[0]),d.push(c.style[0])}catch(t){console.error(t)}else{u=c;var p=null;o%50==0?((p={start:u.start,end:u.end,list:[]}).list.push(u),r.push(p)):((p=r[r.length-1]).end=u.end,p.list.push(u)),o++}}i++}return{list:r,style:{}}}},{key:"parseVTTStyle",value:function(t,e){var n=t.split(":");if(n.length>1){var r=n[0].trim().split("-"),i="";r.length>1?r.map(function(t,e){i+=0===e?t:t.charAt(0).toUpperCase()+t.slice(1)}):i=r[0],e[i]=n[1].trim().replace(/;$/,"")}return e}},{key:"parseVTT",value:function(t){for(var e=(t=t.replace(Sr,"")).split("\n"),n=[],r=0,o=0,a=null,u=!1,c=!1,l=null,f=null,h=[];r<e.length;){var d=s(r,e).trim();if(!d||u&&i(d))u=!d;else if(Er.test(d)&&Or.test(s(r-1,e).trim())){c=!0;var p=/\((.+?)\)/g.exec(d);f=p?p[1]:"",l=""}else if(c)Pr.test(d)?(h.push({key:f,style:l}),l=null,f=null,c=!1):l+=d;else if(d){u=!1;var v=this.checkIsTime(e[r]);if(v){var y=this.parseVttTime(v);if(!a||y.start!==a.start||y.end!==a.end){(a=y).text=[],a.textTag=[];var g=null;o%50==0?((g={start:a.start,end:a.end,list:[]}).list.push(a),n.push(g)):((g=n[n.length-1]).end=a.end,g.list.push(a)),o++}}else if(a){var m=a,_=m.text,x=m.textTag,b=this.parseVttText(e[r]);_.push(b.text),x.push(b.tag)}u=!1}r++}return{list:n,styles:h}}},{key:"checkIsTime",value:function(t){t=t.replace(/\s+/g,"");for(var e=0,n=null;e<Mr.length&&!(n=Mr[e].exec(t));)e++;return n?n[0]:null}},{key:"parseVttText",value:function(t){var e=/^(<?.+?>)/g.exec(t),n="",r="default";if(e){r=e[0].replace(/\<|\>|\&/g,"");var i=RegExp("^<"+r+">(([\\s\\S])*?)</"+r+">$").exec(t);i?n=i[1]:(n=t,r="")}else n=t;for(var s=/<(\w+).(\w+)>/g,a=s.exec(n);a&&a.length>2;)n=n.replace(a[0],"<"+a[1]+' class="'+a[2]+'">'),a=s.exec(n);return{tag:r,text:o(n.replace(/\\n+/g,"<br/>"))}}},{key:"parseVttTime",value:function(t){var e=t.split("--\x3e"),n=void 0,i=0;if(2===e.length){var o=e[0].split(":"),s=e[1].split(":");n=r(o),i=r(s)}return{start:n,end:i,time:t}}},{key:"isVTT",value:function(t){return Sr.test(t)}},{key:"isASS",value:function(t){return jr.test(t)}},{key:"checkFormat",value:function(t){return t?Sr.test(t)?"vtt":jr.test(t)?"ass":null:null}}]),t}(),Lr=function(){function t(){var e=this;rt(this,t),this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver(function(t){e.__trigger(t)}))}return Qe(t,[{key:"addObserver",value:function(t,e){if(this.observer){this.observer&&this.observer.observe(t);for(var n=this.__handlers,r=-1,i=0;i<n.length;i++)n[i]&&t===n[i].target&&(r=i);r>-1?this.__handlers[r].handler.push(e):this.__handlers.push({target:t,handler:[e]})}}},{key:"unObserver",value:function(t){var e=-1;this.__handlers.map(function(n,r){t===n.target&&(e=r)}),this.observer&&this.observer.unobserve(t),e>-1&&this.__handlers.splice(e,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(t,e){for(var n=this.__handlers,r=0;r<n.length;r++)if(n[r]&&t===n[r].target){n[r].handler&&n[r].handler.map(function(n){try{n(t,e)}catch(t){console.error(t)}});break}}},{key:"__trigger",value:function(t){var e=this;t.map(function(t){var n=t.contentRect;e.__runHandler(t.target,n)})}}]),t}(),Ir=null;!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}('xg-text-track.xg-text-track {\n  font-family: "PingFang SC","SF Pro SC","SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;\n  -webkit-font-smoothing: antialiased;\n  position: absolute;\n  bottom: 0;\n  color: #fff;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center; }\n  xg-text-track.xg-text-track.text-track-no-fitvideo {\n    margin-bottom: 2%; }\n  xg-text-track.xg-text-track.text-track-hide {\n    opacity: 0;\n    visibility: hidden; }\n  xg-text-track.xg-text-track.text-track-show {\n    opacity: 1;\n    visibility: visible; }\n  xg-text-track.xg-text-track xg-text-track-inner {\n    display: block;\n    max-width: 92%; }\n  xg-text-track.xg-text-track xg-text-track-span {\n    display: -webkit-box;\n    text-align: center;\n    text-overflow: ellipsis;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    padding: 1px 4px;\n    -webkit-line-clamp: 1;\n    line-height: 120%;\n    word-break: break-word; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-deputy {\n      font-size: 75%; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-single {\n      -webkit-line-clamp: 1; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-double {\n      -webkit-line-clamp: 2; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-three {\n      -webkit-line-clamp: 3; }\n  xg-text-track.xg-text-track.text-track-bg xg-text-track-inner {\n    background-color: rgba(0, 0, 0, .54);\n    border-radius: 2px; }\n  xg-text-track.xg-text-track.text-track-stroke xg-text-track-inner {\n    background-color: none;\n    border-radius: 0;\n    text-shadow: -1px 1px 0 rgba(0, 0, 0, .7), 1px 1px 0 rgba(0, 0, 0, .7), 1px -1px 0 rgba(0, 0, 0, .7), -1px -1px 0 rgba(0, 0, 0, .7); }\n');var Fr=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR"},{code:6,msg:"ABORT"},{code:7,msg:"UNKNOWN"},{code:8,msg:"DATA_ERROR:subtitle.url is null"}],zr={RESIZE:"resize"},Br=!1;return function(t){function e(t){rt(this,e);var n=Ye(this,(e.__proto__||nt(e)).call(this));return Br=p(),n.currentText=null,n.textTrack=[],n._cid=-1,n._gid=-1,n._cids=[],n._iId=null,n._iC=0,n.player=null,n.root=null,n.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff"},n._ctime=0,n._loadingTrack={},kr(n.config).map(function(e){void 0!==t[e]&&null!==t[e]&&(n.config[e]=t[e])}),n._isOpen=!1,n._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},t.subTitles&&"Array"===h(t.subTitles)?(t.player&&n.attachPlayer(t.player),n.setSubTitles(t.subTitles,n.config.defaultOpen),n):Ye(n)}return fn(e,t),Qe(e,[{key:"version",get:function(){return"1.0.12"}}]),Qe(e,[{key:"setSubTitles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._isOpen||n;r&&this.innerRoot&&this.switchOff(),this.currentText=null,this.textTrack=[],t.map(function(t){var n={};kr(t).map(function(e){n[e]=t[e]}),n.isDefault&&(e.currentText=n),e.textTrack.push(n)}),this.currentText&&x(this.currentText).then(function(t){e.addStyles(t),i&&e.switch()})}},{key:"addStyles",value:function(t){var e=t.styles,n=t.format;e&&"vtt"===n&&(e.map(function(t){t.key||(t.key="xg-text-track-span")}),v(e,"xg-text-track"))}},{key:"attachPlayer",value:function(t){var e=this;if(t){this.player&&this.detachPlayer();var n=this.config,r=n.fontColor,i=n.mode,o=n.fitVideo;this.player=t,this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",!this._isOpen&&u(this.root,"text-track-hide"),!o&&u(this.root,"text-track-no-fitvideo"),i&&u(this.root,"text-track-"+i),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),r&&(this.root.style.color=r),this.currentText&&["language","id","label"].map(function(t){e.root.setAttribute("data-"+t,e.currentText[t]||"")}),this.player.root.appendChild(this.root),["destroy","__onTimeupdate","_onResize"].map(function(t){e[t]=e[t].bind(e)}),this.player.on("destroy",this.destroy),this.player.on("timeupdate",this.__onTimeupdate),this._isOpen&&this.switch(),y(t.root,this._onResize)}}},{key:"detachPlayer",value:function(){var t=this.player;t&&(t.off("destroy",this.destroy),t.off("timeupdate",this.__onTimeupdate),t.root&&(g(t.root,this._onResize),t.root.removeChild(this.root)),this.innerRoot=null,this.root=null,this.player=null)}},{key:"switch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return this._loadingTrack=e,new xr(function(n,r){if(!e.id&&!e.language){if(t.currentText){t._loadingTrack={},t._updateCurrent(t.currentText),t._isOpen=!0,t.show();var i=m(0,{message:"switch default subtitle success"});return void n(i)}var o=m(5,{message:"no default subtitle"});return void r(o)}if(t.currentText&&b(e,t.currentText))t._loadingTrack={},t._updateCurrent(t.currentText),t._isOpen=!0,t.show(),n(m(0));else{for(var s=null,a=0;a<t.textTrack.length;a++)if(b(e,t.textTrack[a])){s=t.textTrack[a];break}if(s)s.list?(t._loadingTrack={},t._updateCurrent(s),t._isOpen=!0,t.show(),n(m(0))):x(s).then(function(e){if(t.addStyles(e),t._loadingTrack.id===s.id||t._loadingTrack.language===e.language)t._loadingTrack={},t._updateCurrent(e),t._isOpen=!0,t.show(),n(m(0));else{var i=m(6,{message:"check _loadingTrack fail id: "+t._loadingTrack.id+"  nextSubtitle:"+e.id});console.trace(i),r(i)}}).catch(function(t){r(t)});else{var u=m(4,new Error("The is no subtitle with id:[{"+e.id+"}] or language:["+e.language+"]"));console.trace(u),r(u)}}})}},{key:"switchOff",value:function(){this._isOpen=!1,this.hide()}},{key:"_updateCurrent",value:function(t){var e=this;if(this.root){this.currentText=t,["language","id","label"].map(function(t){e.root.setAttribute("data-"+t,e.currentText[t]||"")}),this.__remove(this._cids);var n=this.player.currentTime;this._cids=[],this._gid=-1,this._cid=-1,this._update(n)}}},{key:"__loadAll",value:function(){this.textTrack.map(function(t){x(t)})}},{key:"getDelCid",value:function(t,e){for(var n=[],r=0;r<t.length;r++)e.includes(t[r])||n.push(t[r]);return n}},{key:"getNewCid",value:function(t,e){for(var n=[],r=0;r<e.length;r++)t.includes(e[r])||n.push(e[r]);return n}},{key:"_update",value:function(t){var e=this,n=l(t,this.currentText.list,this._gid),r=[];if(n>-1&&(r=f(t,this.currentText.list[n].list,this._cid)),r.length<1)return this._cids.length>0&&this.__remove(this._cids),void(this._cids=[]);if(this._cids!==r||n!==this._gid){this._gid=n,this._cid=r[0];var i=this.getDelCid(this._cids,r),o=this.getNewCid(this._cids,r);this._cids=r,this.__remove(i);var s=[];o.map(function(t){var r=e.currentText.list[n].list[t];r.index=t,s.push(r)}),this.__render(s,t)}}},{key:"__onTimeupdate",value:function(){if(this._isOpen){var t=this.player.video,e=t.videoWidth,n=t.videoHeight;!this._videoMeta.scale&&e&&n&&this._onResize(this.player.root);var r=this.player.currentTime;Math.round(Math.abs(1e3*r-this._ctime))<200||(this._ctime=1e3*r,this.currentText&&this.currentText.list&&this._update(r))}}},{key:"_onResize",value:function(t){var e=this._videoMeta;if(t&&t instanceof window.Element||(t=this.player.root),this._iId&&(clearTimeout(this._iId),this._iId=null),!e.scale){if(!this.player.video)return;var n=this.player.video,r=n.videoWidth,i=n.videoHeight;if(!r||!i)return;e.videoWidth=r,e.videoHeight=i,e.scale=parseInt(i/r*100,10)}this.__startResize(t)}},{key:"resize",value:function(t,e){var n=this,r=this.config,i=r.baseSizeX,o=r.baseSizeY,s=r.minMobileSize,a=r.minSize,u=r.fitVideo,c=r.offsetBottom,l=this._videoMeta.scale;this._videoMeta.lwidth=t,this._videoMeta.lheight=e;var f=void 0,h=0;e/t*100>=l?(h=parseInt(l*t,10)/100,f=t):(h=e,f=parseInt(e/l*100,10)),this._videoMeta.vWidth=f,this._videoMeta.vHeight=h;var d=0,p=0;l>120?(d=o,p=parseInt(d*h/1080,10)):(d=i,p=parseInt(d*f/1920,10));var v=Br?s:a,y={fontSize:p=p<v?v:p>d?d:p},g=parseInt((e-h)/2,10),m=parseInt((t-f)/2,10),_=parseInt(h*c,10)/100;this._videoMeta.vBottom=g,this._videoMeta.vLeft=m,this._videoMeta.marginBottom=_,u&&(y.bottom=g+_,y.left=y.right=m),kr(y).map(function(t){n.root.style[t]=y[t]+"px"}),this.emit(zr.RESIZE,{vLeft:m,vBottom:g,marginBottom:_,vWidth:f,vHeight:h,fontSize:p,scale:l})}},{key:"__startResize",value:function(t){var e=this,n=t.getBoundingClientRect(),r=this._videoMeta,i=n.width,o=n.height;if(this._iId&&(clearTimeout(this._iId),this._iId=null),i>0&&o>0&&(i!==r.lwidth||o!==r.lheight))this._iC=0,this.resize(i,o);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout(function(){e.__startResize(t)},50)}}},{key:"__remove",value:function(t){var e=this;if(t&&!(t.length<1)){for(var n=this.innerRoot.children,r=[],i=0;i<n.length;i++){var o=Number(n[i].getAttribute("data-index"));t.includes(o)&&r.push(n[i])}r.map(function(t){e.innerRoot.removeChild(t)})}}},{key:"__render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&e.map(function(e){var n="text-track-"+t.config.line;e.text.map(function(r,i){i>0&&(n+=" text-track-deputy");var o={"data-start":e.start,"data-end":e.end,"data-index":e.index};t.innerRoot.appendChild(d("xg-text-track-span",r,o,n))})})}},{key:"show",value:function(){c(this.root,"text-track-hide")}},{key:"hide",value:function(){u(this.root,"text-track-hide"),this.innerRoot.innerHTML=""}},{key:"destroy",value:function(){this.detachPlayer(),this.removeAllListeners(),this.player=null,this.textTrack=null}},{key:"marginBottom",get:function(){var t=this._videoMeta,e=t.bottom,n=t.marginBottom;return this.config.fitVideo?e+n:n}}]),e}(wr)});
//# sourceMappingURL=index.min.js.map
